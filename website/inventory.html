<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
    <meta property="og:site_name" content="Bike Builders" />
    <meta name="application-name" content="Bike Builders" />
    <meta name="apple-mobile-web-app-title" content="Bike Builders" />
    <title>Inventory | Bike Builders — Second hand bikes in Muzaffarpur</title>
    <meta
      name="description"
      content="Search the largest collection of second hand bikes in Muzaffarpur. Find pre-owned Royal Enfield, KTM, Honda and more with verified history and inspection reports."
    />
    <meta
      name="keywords"
      content="second hand bike in Muzaffarpur, used bikes Muzaffarpur, pre-owned motorcycles Bihar, buy used bike Muzaffarpur, used bike inventory, inspected bikes for sale, certified used motorcycles, KTM used bikes Muzaffarpur, Royal Enfield used, used Honda bikes, buy used KTM, buy used Royal Enfield, motorcycle search Muzaffarpur, bike filters price year km, Bike Builders inventory"
    />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://www.bikebuilders.in/inventory.html" />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Inventory | Bike Builders — Second hand bikes in Muzaffarpur"
    />
    <meta
      property="og:description"
      content="Browse verified second hand bikes in Muzaffarpur. Inspected, serviced and ready to ride."
    />
    <meta
      property="og:url"
      content="https://www.bikebuilders.in/inventory.html"
    />
    <meta
      property="og:image"
      content="https://www.bikebuilders.in/assets/social-preview.jpg"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Inventory — Bike Builders",
        "description": "Inventory of pre-owned and second hand bikes in Muzaffarpur. Search by brand, price, year and more.",
        "keywords": "second hand bike in muzaffarpur, used bikes muzaffarpur, pre-owned motorcycles"
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Bike Builders",
        "url": "https://www.bikebuilders.in/inventory.html",
        "telephone": "+918210283582",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Rambag Chowk, Rambag Road, Gaushala Chowk",
          "addressLocality": "Muzaffarpur",
          "addressRegion": "Bihar",
          "postalCode": "842002",
          "addressCountry": "IN"
        },
        "description": "Browse our large inventory of inspected pre-owned bikes in Muzaffarpur. Filter by brand, year, km driven and price.",
        "image": "https://www.bikebuilders.in/assets/social-preview.jpg",
        "areaServed": ["Muzaffarpur", "Bihar"]
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://bike-builders-backend.vercel.app" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="inventory.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>

  <body>
    <div class="hero-section inventory-hero">
      <div class="overlay">
        <div class="rectangle"></div>
        <div class="gradient"></div>
      </div>

      <nav class="navbar">
        <a href="https://www.bikebuilders.in/" class="logo-link">
          <div class="logo">
            <img
              src="./assets/logo2.svg"
              class="logo-img"
              alt="Bike Builders Logo"
              itemprop="logo"
            />
          </div>
        </a>
        <ul class="nav-links">
          <li>
            <a href="https://www.bikebuilders.in/" data-translate="Home"
              >Home</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/inventory.html"
              data-translate="Buy Bike"
              >Buy Bike</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/sell.html"
              data-translate="Sell Your Bike"
              >Sell Your Bike</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/about.html"
              aria-label="About Bike Builders"
              data-translate="About Us"
              >About Us</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/book.html"
              aria-label="Book Bike"
              data-translate="Book Bike"
              >Book Bike</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/finance.html"
              aria-label="Bike Finance"
              data-translate="Bike Finance"
              >Bike Finance</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/updates.html"
              data-translate="Updates"
              >Updates</a
            >
          </li>
          <li>
            <a
              href="https://www.bikebuilders.in/contact.html"
              data-translate="Contact"
              >Contact</a
            >
          </li>
        </ul>

        <div class="theme-toggle">
          <input
            type="checkbox"
            id="darkModeToggle"
            aria-label="Toggle dark mode"
          />
          <label for="darkModeToggle" class="toggle-label">
            <i class="fas fa-sun"></i>
            <i class="fas fa-moon"></i>
            <span class="toggle-ball"></span>
          </label>
        </div>
      </nav>
      <section class="inventory-section full-inventory">
        <div class="inventory-content">
          <!-- Add this inside the inventory-section div, right after the search-container -->
          <div class="filters-container">
            <!-- Desktop Filters -->
            <div class="desktop-filters">
              <button class="filter-btn" data-filter="all">
                <span data-translate="All Bikes">All Bikes</span>
              </button>

              <div class="filter-group">
                <button class="filter-btn" data-filter="price">
                  <span data-translate="Price">Price</span>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="price-dropdown">
                  <div class="price-presets">
                    <button class="price-preset" data-min="0" data-max="50000">
                      <span data-translate="Under 50K">Under 50K</span>
                    </button>
                    <button
                      class="price-preset"
                      data-min="50000"
                      data-max="100000"
                    >
                      <span data-translate="50K-1L">50K-1L</span>
                    </button>
                    <button
                      class="price-preset"
                      data-min="100000"
                      data-max="200000"
                    >
                      <span data-translate="1L-2L">1L-2L</span>
                    </button>
                    <button
                      class="price-preset"
                      data-min="200000"
                      data-max="500000"
                    >
                      <span data-translate="2L-5L">2L-5L</span>
                    </button>
                    <button class="price-preset" data-min="500000">
                      <span data-translate="5L+">5L+</span>
                    </button>
                  </div>
                  <div class="price-range-inputs">
                    <div class="range-input">
                      <label for="min-price">Min</label>
                      <input type="number" id="min-price" placeholder="Min" />
                    </div>
                    <div class="range-input">
                      <label for="max-price">Max</label>
                      <input type="number" id="max-price" placeholder="Max" />
                    </div>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button class="filter-btn" data-filter="brand">
                  <span data-translate="Brand">Brand</span>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="brand-dropdown">
                  <div class="brand-options">
                    <button class="filter-option" data-brand="Royal Enfield">
                      Royal Enfield
                    </button>
                    <button class="filter-option" data-brand="Bajaj">
                      Bajaj
                    </button>
                    <button class="filter-option" data-brand="Hero">
                      Hero
                    </button>
                    <button class="filter-option" data-brand="Yamaha">
                      Yamaha
                    </button>
                    <button class="filter-option" data-brand="KTM">KTM</button>
                    <button class="filter-option" data-brand="TVS">TVS</button>
                    <button class="filter-option" data-brand="Honda">
                      Honda
                    </button>
                    <button class="filter-option" data-brand="Suzuki">
                      Suzuki
                    </button>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button class="filter-btn" data-filter="year">
                  <span data-translate="Year">Year</span>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="year-dropdown">
                  <div class="year-range">
                    <div class="range-values">
                      <span id="year-min-value">2015</span> -
                      <span id="year-max-value">2024</span>
                    </div>
                    <div class="range-sliders">
                      <input
                        type="range"
                        id="year-min"
                        min="2000"
                        max="2024"
                        value="2015"
                      />
                      <input
                        type="range"
                        id="year-max"
                        min="2000"
                        max="2024"
                        value="2024"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button class="filter-btn" data-filter="km">
                  <span data-translate="KM Driven">KM Driven</span>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="km-dropdown">
                  <div class="km-range">
                    <div class="range-values">
                      <span id="km-min-value">0</span> -
                      <span id="km-max-value">50,000</span> km
                    </div>
                    <div class="range-sliders">
                      <input
                        type="range"
                        id="km-min"
                        min="0"
                        max="100000"
                        value="0"
                        step="1000"
                      />
                      <input
                        type="range"
                        id="km-max"
                        min="0"
                        max="100000"
                        value="50000"
                        step="1000"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button class="filter-btn" data-filter="owner">
                  <span data-translate="Ownership">Ownership</span>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="owner-dropdown">
                  <div class="ownership-options">
                    <button class="filter-option" data-owner="1">
                      <span data-translate="1st Owner">1st Owner</span>
                    </button>
                    <button class="filter-option" data-owner="2">
                      <span data-translate="2nd Owner">2nd Owner</span>
                    </button>
                    <button class="filter-option" data-owner="3">
                      <span data-translate="3+ Owner">3+ Owner</span>
                    </button>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button class="filter-btn" data-filter="fuel">
                  <span data-translate="Fuel Type">Fuel Type</span>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="fuel-dropdown">
                  <div class="fuel-options">
                    <button class="filter-option" data-fuel="Petrol">
                      <span data-translate="Petrol">Petrol</span>
                    </button>
                    <button class="filter-option" data-fuel="Electric">
                      <span data-translate="Electric">Electric</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mobile-filters-container">
            <div class="mobile-filters">
              <div class="mobile-filters-header">
                <h3 data-translate="Filters">Filters</h3>
                <button class="close-filters-btn">&times;</button>
              </div>

              <div class="mobile-filter-group">
                <h4 data-translate="Price">Price</h4>
                <div class="price-presets">
                  <button class="price-preset" data-min="0" data-max="50000">
                    <span data-translate="Under 50K">Under 50K</span>
                  </button>
                  <button
                    class="price-preset"
                    data-min="50000"
                    data-max="100000"
                  >
                    <span data-translate="50K-1L">50K-1L</span>
                  </button>
                  <button
                    class="price-preset"
                    data-min="100000"
                    data-max="200000"
                  >
                    <span data-translate="1L-2L">1L-2L</span>
                  </button>
                  <button
                    class="price-preset"
                    data-min="200000"
                    data-max="500000"
                  >
                    <span data-translate="2L-5L">2L-5L</span>
                  </button>
                  <button class="price-preset" data-min="500000">
                    <span data-translate="5L+">5L+</span>
                  </button>
                </div>
                <div class="price-range-inputs">
                  <div class="range-input">
                    <label for="min-price-mobile">Min</label>
                    <input
                      type="number"
                      id="min-price-mobile"
                      placeholder="Min"
                    />
                  </div>
                  <div class="range-input">
                    <label for="max-price-mobile">Max</label>
                    <input
                      type="number"
                      id="max-price-mobile"
                      placeholder="Max"
                    />
                  </div>
                </div>
              </div>

              <div class="mobile-filter-group">
                <h4 data-translate="Brand">Brand</h4>
                <div class="mobile-brand-options" id="brand-dropdown-mobile">
                  <button class="filter-option" data-brand="Royal Enfield">
                    Royal Enfield
                  </button>
                  <button class="filter-option" data-brand="Bajaj">
                    Bajaj
                  </button>
                  <button class="filter-option" data-brand="Hero">Hero</button>
                  <button class="filter-option" data-brand="Yamaha">
                    Yamaha
                  </button>
                  <button class="filter-option" data-brand="KTM">KTM</button>
                  <button class="filter-option" data-brand="TVS">TVS</button>
                  <button class="filter-option" data-brand="Honda">
                    Honda
                  </button>
                  <button class="filter-option" data-brand="Suzuki">
                    Suzuki
                  </button>
                </div>
              </div>

              <div class="mobile-filter-group">
                <h4 data-translate="Year">Year</h4>
                <div class="year-range">
                  <div class="range-values">
                    <span id="year-min-value-mobile">2015</span> -
                    <span id="year-max-value-mobile">2024</span>
                  </div>
                  <div class="range-sliders">
                    <input
                      type="range"
                      id="year-min-mobile"
                      min="2000"
                      max="2024"
                      value="2015"
                    />
                    <input
                      type="range"
                      id="year-max-mobile"
                      min="2000"
                      max="2024"
                      value="2024"
                    />
                  </div>
                </div>
              </div>

              <div class="mobile-filter-group">
                <h4 data-translate="KM Driven">KM Driven</h4>
                <div class="km-range">
                  <div class="range-values">
                    <span id="km-min-value-mobile">0</span> -
                    <span id="km-max-value-mobile">50,000</span> km
                  </div>
                  <div class="range-sliders">
                    <input
                      type="range"
                      id="km-min-mobile"
                      min="0"
                      max="100000"
                      value="0"
                      step="1000"
                    />
                    <input
                      type="range"
                      id="km-max-mobile"
                      min="0"
                      max="100000"
                      value="50000"
                      step="1000"
                    />
                  </div>
                </div>
              </div>

              <div class="mobile-filter-group">
                <h4 data-translate="Ownership">Ownership</h4>
                <div
                  class="mobile-ownership-options"
                  id="owner-dropdown-mobile"
                >
                  <button class="filter-option" data-owner="1">
                    <span data-translate="1st Owner">1st Owner</span>
                  </button>
                  <button class="filter-option" data-owner="2">
                    <span data-translate="2nd Owner">2nd Owner</span>
                  </button>
                  <button class="filter-option" data-owner="3">
                    <span data-translate="3+ Owner">3+ Owner</span>
                  </button>
                </div>
              </div>

              <div class="mobile-filter-group">
                <h4 data-translate="Fuel Type">Fuel Type</h4>
                <div class="mobile-fuel-options" id="fuel-dropdown-mobile">
                  <button class="filter-option" data-fuel="Petrol">
                    <span data-translate="Petrol">Petrol</span>
                  </button>
                  <button class="filter-option" data-fuel="Electric">
                    <span data-translate="Electric">Electric</span>
                  </button>
                </div>
              </div>

              <div class="mobile-filter-actions">
                <button class="reset-filters-btn" data-translate="Reset">
                  Reset
                </button>
                <button class="apply-filters-btn" data-translate="Apply">
                  Apply
                </button>
              </div>
            </div>
          </div>
          <div class="bike-grid-container">
            <div class="section-header">
              <div class="search-container">
                <div class="search-box">
                  <input
                    type="text"
                    id="inventory-search"
                    placeholder="Search bikes by brand or model..."
                  />
                  <button id="search-btn"><i class="fas fa-search"></i></button>
                </div>

                <div class="sort-dropdown">
                  <button class="sort-btn">
                    <span id="sort-text" data-translate="Sort: Default"
                      >Sort: Default</span
                    >
                    <i class="fas fa-chevron-down"></i>
                  </button>
                  <div class="sort-options">
                    <button class="sort-option" data-sort="default">
                      <span data-translate="Default">Default</span>
                    </button>
                    <button class="sort-option" data-sort="price-low">
                      <span data-translate="Price: Low to High"
                        >Price: Low to High</span
                      >
                    </button>
                    <button class="sort-option" data-sort="price-high">
                      <span data-translate="Price: High to Low"
                        >Price: High to Low</span
                      >
                    </button>
                    <button class="sort-option" data-sort="year-new">
                      <span data-translate="Year: Newest First"
                        >Year: Newest First</span
                      >
                    </button>
                    <button class="sort-option" data-sort="year-old">
                      <span data-translate="Year: Oldest First"
                        >Year: Oldest First</span
                      >
                    </button>
                  </div>
                </div>
              </div>
              <h2 id="filtered-count">0 Bikes Available</h2>
            </div>
            <div class="brand-logos-container">
              <div class="brand-logos">
                <div class="brand-logo" data-brand="Royal Enfield">
                  <img src="./assets/images/relogo.png" alt="Royal Enfield" />
                </div>
                <div class="brand-logo" data-brand="Bajaj">
                  <img
                    src="https://static.vecteezy.com/system/resources/previews/019/766/250/non_2x/bajaj-logo-bajaj-icon-transparent-free-png.png"
                    alt="Bajaj"
                  />
                </div>
                <div class="brand-logo" data-brand="Hero">
                  <img
                    src="https://brandeps.com/logo-download/H/Hero-MotoCorp-logo-01.png"
                    alt="Hero"
                  />
                </div>
                <div class="brand-logo" data-brand="Yamaha">
                  <img
                    src="https://brandlogos.net/wp-content/uploads/2014/10/yamaha_3d-logo_brandlogos.net_iwtkb.png"
                    alt="Yamaha"
                  />
                </div>
                <div class="brand-logo" data-brand="KTM">
                  <img
                    src="https://download.logo.wine/logo/KTM/KTM-Logo.wine.png"
                    alt="KTM"
                  />
                </div>
                <div class="brand-logo" data-brand="TVS">
                  <img
                    src="https://download.logo.wine/logo/TVS_Motor_Company/TVS_Motor_Company-Logo.wine.png"
                    alt="TVS"
                  />
                </div>
                <div class="brand-logo" data-brand="Honda">
                  <img
                    src="https://upload.wikimedia.org/wikipedia/commons/7/7b/Honda_Logo.svg"
                    alt="Honda"
                  />
                </div>
                <div class="brand-logo" data-brand="Suzuki">
                  <img
                    src="https://images.seeklogo.com/logo-png/13/2/suzuki-logo-png_seeklogo-134277.png"
                    alt="Suzuki"
                  />
                </div>
              </div>
            </div>
            <div class="bike-grid"></div>
          </div>
        </div>
      </section>
    </div>

    <div id="reviewModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h3>Leave a Review</h3>
        <form id="reviewForm">
          <input type="text" id="reviewName" placeholder="Your Name" required />
          <textarea
            id="reviewMessage"
            placeholder="Your Review"
            required
          ></textarea>
          <div class="star-rating">
            <span class="star" data-value="1"><i class="fa fa-star"></i></span>
            <span class="star" data-value="2"><i class="fa fa-star"></i></span>
            <span class="star" data-value="3"><i class="fa fa-star"></i></span>
            <span class="star" data-value="4"><i class="fa fa-star"></i></span>
            <span class="star" data-value="5"><i class="fa fa-star"></i></span>
          </div>
          <input type="hidden" id="reviewRating" value="0" required />
          <button type="submit" class="submit-btn">Submit</button>
        </form>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <div class="logo">
            <img
              src="./assets/logo2.svg"
              style="width: 50px"
              alt="Bike Builders Logo"
            />
          </div>
          <p
            data-translate="Bike Builder is bringing you the future of bike riding today. We are providing best second-hand bikes, and easy buying and selling experience. Find the best second-hand bikes at reasonable pricing, and hassle-free ownership. From buying to selling to servicing, we ensure all our bikes are safe and enjoyable to ride."
          >
            Bike Builder is bringing you the future of bike riding today. We are
            providing best second-hand bikes, and easy buying and selling
            experience. Find the best second-hand bikes at reasonable pricing,
            and hassle-free ownership. From buying to selling to servicing, we
            ensure all our bikes are safe and enjoyable to ride.
          </p>
          <div class="footer-stars" style="margin: 10px 0">
            <span class="star" style="color: gold; font-size: 1.5em"
              ><i class="fa fa-star"></i
            ></span>
            <span class="star" style="color: gold; font-size: 1.5em"
              ><i class="fa fa-star"></i
            ></span>
            <span class="star" style="color: gold; font-size: 1.5em"
              ><i class="fa fa-star"></i
            ></span>
            <span class="star" style="color: gold; font-size: 1.5em"
              ><i class="fa fa-star"></i
            ></span>
            <span class="star" style="color: gold; font-size: 1.5em"
              ><i class="fa fa-star"></i
            ></span>
          </div>
          <div class="social-icons">
            <a href="https://www.facebook.com/share/1Ao18FYX8e/"
              ><i class="fa-brands fa-facebook-f" style="color: #0400ff"></i
            ></a>
            <a
              href="https://www.instagram.com/bikebuilders41?igsh=ZDk5M3NxdmI1Ymhp"
              aria-label="Visit our Instagram profile"
              ><img
                src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"
                style="width: 20px"
            /></a>
            <a href="https://wa.me/918210283582"
              ><i class="fa-brands fa-whatsapp" style="color: #00a841"></i
            ></a>
          </div>
        </div>
        <div class="footer-section">
          <h3 data-translate="Quick Links">Quick Links</h3>
          <ul>
            <li>
              <a href="https://www.bikebuilders.in/" data-translate="Home"
                >Home</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/inventory.html"
                data-translate="Buy Bike"
                >Buy Bike</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/sell.html"
                data-translate="Sell Your Bike"
                >Sell Your Bike</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/about.html"
                aria-label="About Bike Builders"
                data-translate="About Us"
                >About Us</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/book.html"
                aria-label="Book Bike"
                data-translate="Book Bike"
                >Book Bike</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/updates.html"
                data-translate="Updates"
                >Updates</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/contact.html"
                data-translate="Contact"
                >Contact</a
              >
            </li>
          </ul>
        </div>
        <div class="footer-section">
          <h3 data-translate="Resources">Resources</h3>
          <ul>
            <li>
              <a
                href="https://www.bikebuilders.in/finance.html"
                data-translate="Bike Finance"
                >Bike Finance</a
              >
            </li>
            <li>
              <a
                href="https://www.bikebuilders.in/locations-bihar.html"
                data-translate="Locations"
                >Locations</a
              >
            </li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Brands</h3>
          <ul>
            <li><a href="https://www.bikebuilders.in/">Hero</a></li>
            <li><a href="https://www.bikebuilders.in/">Bajaj</a></li>
            <li><a href="https://www.bikebuilders.in/">TVS</a></li>
            <li><a href="https://www.bikebuilders.in/">Royal Enfield</a></li>
            <li><a href="https://www.bikebuilders.in/">Honda</a></li>
            <li><a href="https://www.bikebuilders.in/">Yamaha</a></li>
            <li><a href="https://www.bikebuilders.in/">Suzuki</a></li>
            <li><a href="https://www.bikebuilders.in/">KTM</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3 data-translate="Locations We Serve">Locations We Serve</h3>
          <ul>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Patna</a
              >
            </li>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Gaya</a
              >
            </li>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Bhagalpur</a
              >
            </li>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Muzaffarpur</a
              >
            </li>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Darbhanga</a
              >
            </li>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Purnia</a
              >
            </li>
            <li></li>
            <li>
              <a href="https://www.bikebuilders.in/locations-bihar.html"
                >Used Bike In Hajipur</a
              >
            </li>
          </ul>
        </div>

        <div class="footer-section">
          <h3 data-translate="Contact Us">Contact Us</h3>
          <p
            data-translate="Rambag Chowk, Rambag Road Kabristaan k bagal me, Gaushala Chowk Mandir , Muzaffarpur, Bihar 842002"
          >
            <i class="fas fa-map-marker-alt"></i> Rambag Chowk, Rambag Road
            Kabristaan k bagal me, Gaushala Chowk Mandir , Muzaffarpur, Bihar
            842002
          </p>
          <span itemprop="telephone">+91 8210283582 / 9835844897</span>
        </div>
      </div>
      <div class="footer-bottom">
        <p data-translate="&copy; 2023 Bike Builders. All rights reserved.">
          &copy; 2023 Bike Builders. All rights reserved.
        </p>
        <a
          href="https://www.pixelatenest.com/"
          style="color: #a9a9a9"
          data-translate="Designed By Pixelate Nest"
          >Designed By Pixelate Nest</a
        >
      </div>
    </footer>
    <script>
      // Check for stored language preference when page loads
      document.addEventListener("DOMContentLoaded", function () {
        const translations = {
          en: {
            "Bike Builders | Premium Pre-Owned Motorcycles in India":
              "Bike Builders | Premium Pre-Owned Motorcycles in India",
            Home: "Home",
            Updates: "Updates",
            "Buy Bike": "Buy Bike",
            "Sell Your Bike": "Sell Your Bike",
            "About Us": "About Us",
            Contact: "Contact",
            "Get the Quote": "Get the Quote",
            Filters: "Filters",
            "All Bikes": "All Bikes",
            Price: "Price",
            Brand: "Brand",
            Year: "Year",
            "KM Driven": "KM Driven",
            Ownership: "Ownership",
            "Fuel Type": "Fuel Type",
            "Sort: Default": "Sort: Default",
            Default: "Default",
            "Price: Low to High": "Price: Low to High",
            "Price: High to Low": "Price: High to Low",
            "Year: Newest First": "Year: Newest First",
            "Year: Oldest First": "Year: Oldest First",
            "Under 50K": "Under 50K",
            "50K-1L": "50K-1L",
            "1L-2L": "1L-2L",
            "2L-5L": "2L-5L",
            "5L+": "5L+",
            "1st Owner": "1st Owner",
            "2nd Owner": "2nd Owner",
            "3+ Owner": "3+ Owner",
            Petrol: "Petrol",
            Electric: "Electric",
            "Showing results for:": "Showing results for:",
            "Clear search": "Clear search",
            "Bikes Available": "Bikes Available",
            "Fuel Type": "Fuel Type",
            "Sort: Default": "Sort: Default",
            "Price: Low to High": "Price: Low to High",
            "Price: High to Low": "Price: High to Low",
            "Year: Newest First": "Year: Newest First",
            "Year: Oldest First": "Year: Oldest First",
            "Under 50K": "Under 50K",
            "50K-1L": "50K-1L",
          },
          hi: {
            "Bike Builders | Premium Pre-Owned Motorcycles in India":
              "बाइक बिल्डर्स | भारत में प्रीमियम सेकेंड हैंड बाइक्स",
            Home: "होम",
            Updates: "अपडेट्स",
            "Buy Bike": "बाइक खरीदें",
            "Sell Your Bike": "बाइक बेचें",
            "About Us": "हमारे बारे में",
            Contact: "संपर्क करें",
            "Get the Quote": "कीमत पता करें",
            Filters: "फिल्टर",
            "All Bikes": "सभी बाइक",
            Price: "कीमत",
            Brand: "ब्रांड",
            Year: "वर्ष",
            "KM Driven": "किलोमीटर",
            Ownership: "मालिकाना हक",
            "Fuel Type": "ईंधन प्रकार",
            "Sort: Default": "क्रम: डिफ़ॉल्ट",
            Default: "डिफ़ॉल्ट",
            "Price: Low to High": "कीमत: कम से ज्यादा",
            "Price: High to Low": "कीमत: ज्यादा से कम",
            "Year: Newest First": "वर्ष: नए से पुराने",
            "Year: Oldest First": "वर्ष: पुराने से नए",
            "Under 50K": "50K से कम",
            "50K-1L": "50K-1L",
            "1L-2L": "1L-2L",
            "2L-5L": "2L-5L",
            "5L+": "5L+",
            "1st Owner": "पहला मालिक",
            "2nd Owner": "दूसरा मालिक",
            "3+ Owner": "तीसरा या अधिक मालिक",
            Petrol: "पेट्रोल",
            Electric: "इलेक्ट्रिक",
            "Showing results for:": "खोज परिणाम:",
            "Clear search": "खोज साफ करें",
            "Bikes Available": "बाइक उपलब्ध",
            "Fuel Type": "ईंधन प्रकार",
            "Sort: Default": "क्रम: डिफ़ॉल्ट",
            "Price: Low to High": "कीमत: कम से ज्यादा",
            "Price: High to Low": "कीमत: ज्यादा से कम",
            "Year: Newest First": "वर्ष: नए से पुराने",
            "Year: Oldest First": "वर्ष: पुराने से नए",
            "Under 50K": "50K से कम",
            "50K-1L": "50K-1L",
          },
        };

        const preferredLanguage =
          localStorage.getItem("preferredLanguage") || "en";

        if (preferredLanguage !== "en") {
          document.body.classList.add("hindi-font");
          const elements = document.querySelectorAll("[data-translate]");
          elements.forEach((element) => {
            const key = element.getAttribute("data-translate");
            if (
              translations[preferredLanguage] &&
              translations[preferredLanguage][key]
            ) {
              element.textContent = translations[preferredLanguage][key];
            }
          });
        }
      });
    </script>
    <script src="./testimonials.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let allBikes = [];
        let currentFilters = {
          brand: null,
          minPrice: 0,
          maxPrice: Infinity,
          minYear: 2015,
          maxYear: 2024,
          minKm: 0,
          maxKm: 50000,
          owner: null,
          fuel: null,
        };
        let currentSort = "default";

        const API_BASE = (function () {
          try {
            const host = window.location.hostname;
            if (host === "localhost" || host === "127.0.0.1") {
              return `${window.location.protocol}//${host}:2500`;
            }
          } catch (e) {}
          return "https://bike-builders-backend.vercel.app";
        })();

        (function applyPriceFromUrl() {
          try {
            const params = new URLSearchParams(window.location.search);
            if (params.has("price")) {
              const v = params.get("price");
              let min = null;
              let max = null;
              let label = "";

              if (!v) return;

              if (v === "under-50000" || /^under-?50?k$/i.test(v)) {
                min = 0;
                max = 50000;
                label = "Under 50K";
              } else if (v === "50000-100000" || /^50000-100000$/.test(v)) {
                min = 50000;
                max = 100000;
                label = "50K-1L";
              } else if (v === "100000-200000" || /^100000-200000$/.test(v)) {
                min = 100000;
                max = 200000;
                label = "1L-2L";
              } else if (
                v === "200000-plus" ||
                v === "200000_plus" ||
                v === "200000+" ||
                /^(\d+)\+$/i.test(v)
              ) {
                min = 200000;
                max = null;
                label = "2L+";
              } else {
                // support numeric ranges like 50000-100000
                const m = v.match(/^(\d+)-(\d+)$/);
                if (m) {
                  min = Number(m[1]);
                  max = Number(m[2]);
                  label = `${m[1]}-${m[2]}`;
                }
              }

              if (min !== null) currentFilters.minPrice = Number(min);
              if (max !== null) currentFilters.maxPrice = Number(max);

              // Update price button text
              const priceBtn = document.querySelector('[data-filter="price"]');
              if (priceBtn) {
                const text = label || v.replace(/[-_]/g, " ");
                priceBtn.innerHTML = `${text} <i class="fas fa-chevron-down"></i>`;
              }

              // Highlight matching preset if present
              document.querySelectorAll(".price-preset").forEach((btn) => {
                const bmin = btn.dataset.min ? Number(btn.dataset.min) : null;
                const bmax = btn.dataset.max ? Number(btn.dataset.max) : null;
                const matchesMin = bmin === (min === null ? null : Number(min));
                const matchesMax = (bmax === null && max === null) || bmax === Number(max);
                btn.classList.toggle("active", matchesMin && matchesMax);
              });
            }
          } catch (e) {
            console.warn("Failed to read price from URL", e);
          }
        })();
        (function applyBrandFromUrl() {
          try {
            const params = new URLSearchParams(window.location.search);
            if (params.has("brand")) {
              const brandParam = params.get("brand");
              if (brandParam && brandParam.trim() !== "") {
                const decoded = decodeURIComponent(brandParam);
                currentFilters.brand = decoded;

                const brandBtn = document.querySelector(
                  '[data-filter="brand"]',
                );
                if (brandBtn) {
                  brandBtn.innerHTML = `${decoded} <i class="fas fa-chevron-down"></i>`;
                }

                document.querySelectorAll(".brand-logo").forEach((el) => {
                  try {
                    if (
                      el.dataset &&
                      normalizeBrand(el.dataset.brand) ===
                        normalizeBrand(decoded)
                    ) {
                      el.classList.add("active");
                    } else {
                      el.classList.remove("active");
                    }
                  } catch (e) {}
                });
              }
            }
          } catch (e) {
            console.warn("Failed to read brand from URL:", e);
          }
        })();

        function normalizeBrand(str) {
          if (!str) return "";
          return String(str).toLowerCase().replace(/\s+/g, " ").trim();
        }

        function normalizeImageUrl(url) {
          if (!url) return url;
          if (
            /^https?:\/\//i.test(url) ||
            url.startsWith("data:") ||
            url.startsWith("//")
          )
            return url;
          if (url.startsWith("/")) return API_BASE + url;
          return API_BASE + "/uploads/" + url.replace(/^\/+/, "");
        }

        function loadBikes() {
          // Use cached bikes from homepage prefetch if available (short TTL)
          try {
            const cacheKey = "cachedBikes";
            const tsKey = "cachedBikesTS";
            const maxAge = 5 * 60 * 1000; // 5 minutes
            const now = Date.now();
            const cached = localStorage.getItem(cacheKey);
            const cachedTS = localStorage.getItem(tsKey);
            if (cached && cachedTS && now - parseInt(cachedTS, 10) <= maxAge) {
              let bikes = JSON.parse(cached || "[]");
              // Normalize image URLs (assume non-cloudinary cached data)
              bikes = (bikes || []).map((b) => {
                try {
                  const copy = Object.assign({}, b);
                  if (Array.isArray(copy.imageUrl)) {
                    copy.imageUrl = copy.imageUrl
                      .map((u) => normalizeImageUrl(u))
                      .filter(Boolean);
                  } else if (
                    typeof copy.imageUrl === "string" &&
                    copy.imageUrl.trim() !== ""
                  ) {
                    copy.imageUrl = [normalizeImageUrl(copy.imageUrl)];
                  } else {
                    copy.imageUrl = [];
                  }
                  return copy;
                } catch (e) {
                  return b;
                }
              });
              allBikes = bikes;
              try {
                if (typeof renderBrandCounts === "function")
                  renderBrandCounts(bikes);
              } catch (e) {}
              if (bikes.length === 0) showNoBikesMessage();
              else applyAllFilters();

              // Refresh cache in background
              try {
                fetch(API_BASE + "/api/config")
                  .then((r) => r.json())
                  .then(() => fetch(API_BASE + "/api/bikes"))
                  .then((r) => r.json())
                  .then((data) => {
                    let fresh = [];
                    if (Array.isArray(data)) fresh = data;
                    else if (data && Array.isArray(data.bikes))
                      fresh = data.bikes;
                    localStorage.setItem(cacheKey, JSON.stringify(fresh));
                    localStorage.setItem(tsKey, String(Date.now()));
                  })
                  .catch(() => {});
              } catch (e) {}

              return;
            }
          } catch (e) {
            /* ignore cache errors */
          }
          fetch(API_BASE + "/api/config")
            .then((r) => r.json())
            .then((cfg) => {
              const USE_CLOUDINARY = cfg && cfg.success && cfg.cloudinary;

              return fetch(API_BASE + "/api/bikes")
                .then((response) => {
                  if (!response.ok)
                    throw new Error("Network response was not ok");
                  return response.json();
                })
                .then((data) => ({ data, USE_CLOUDINARY }));
            })
            .catch((configErr) => {
              return fetch(API_BASE + "/api/bikes")
                .then((response) => {
                  if (!response.ok)
                    throw new Error("Network response was not ok");
                  return response.json();
                })
                .then((data) => ({ data, USE_CLOUDINARY: false }));
            })
            .then(({ data, USE_CLOUDINARY }) => {
              let bikes = [];
              if (Array.isArray(data)) {
                bikes = data;
              } else if (data && Array.isArray(data.bikes)) {
                bikes = data.bikes;
              } else {
                console.warn("Unexpected bikes response:", data);
              }

              // ensure bikes' image paths are normalized to point to the backend
              bikes = (bikes || []).map((b) => {
                try {
                  const copy = Object.assign({}, b);
                  if (Array.isArray(copy.imageUrl)) {
                    copy.imageUrl = copy.imageUrl
                      .map((u) => normalizeImageUrl(u))
                      .filter((u) => {
                        if (!u) return false;
                        if (USE_CLOUDINARY) return /^https?:\/\//i.test(u);
                        return true;
                      });
                  } else if (
                    typeof copy.imageUrl === "string" &&
                    copy.imageUrl.trim() !== ""
                  ) {
                    const nu = normalizeImageUrl(copy.imageUrl);
                    copy.imageUrl =
                      !USE_CLOUDINARY || /^https?:\/\//i.test(nu) ? [nu] : [];
                  } else {
                    copy.imageUrl = [];
                  }
                  return copy;
                } catch (e) {
                  return b;
                }
              });
              allBikes = bikes;
              // Render brand counts and logos (show number of listings per brand)
              try {
                if (typeof renderBrandCounts === "function") {
                  renderBrandCounts(bikes);
                }
              } catch (e) {
                console.warn("renderBrandCounts failed:", e);
              }

              if (bikes.length === 0) {
                showNoBikesMessage();
              } else {
                applyAllFilters();
              }
            })
            .catch((error) => {
              console.error("Error fetching bikes:", error);
              showErrorMessage();
            });
        }

        // Initialize sort dropdown function - moved to top level
        function initSortDropdown() {
          const sortBtn = document.querySelector(".sort-btn");
          const sortOptions = document.querySelector(".sort-options");

          if (!sortBtn || !sortOptions) return; // Safety check

          sortBtn.addEventListener("click", function (e) {
            e.stopPropagation();
            sortOptions.style.display =
              sortOptions.style.display === "block" ? "none" : "block";
          });

          document.addEventListener("click", function (e) {
            if (!e.target.closest(".sort-dropdown")) {
              sortOptions.style.display = "none";
            }
          });

          document.querySelectorAll(".sort-option").forEach((option) => {
            option.addEventListener("click", function () {
              const sortType = this.dataset.sort;
              currentSort = sortType; // This now references the top-level variable

              // Update the sort button text
              document.getElementById("sort-text").textContent =
                `Sort: ${this.textContent}`;

              // Close the dropdown
              sortOptions.style.display = "none";

              // Apply filters with new sorting
              applyAllFilters();
            });
          });
        }

        function displayBikes(bikes) {
          const bikeGrid = document.querySelector(".bike-grid");
          bikeGrid.innerHTML = "";

          if (bikes.length === 0) {
            showNoBikesMessage();
            return;
          }

          bikes.forEach((bike) => {
            const bikeCard = createBikeCard(bike);
            bikeGrid.appendChild(bikeCard);
          });

          // Initialize car image sliders
          initImageSliders();

          addBikeCardClickListeners();
        }

        // Create individual bike card
        function createBikeCard(bike) {
          const bikeCard = document.createElement("div");
          bikeCard.className = "bike-card";

          // Set data attributes
          bikeCard.dataset.brand = bike.brand || "";
          bikeCard.dataset.price = bike.price || 0;
          bikeCard.dataset.year = bike.modelYear || new Date().getFullYear();
          bikeCard.dataset.km = bike.kmDriven || 0;
          bikeCard.dataset.emiAmount = bike.emiAmount || 0;
          bikeCard.dataset.owner = bike.ownership || "1";
          bikeCard.dataset.fuel = bike.fuelType || "Petrol";

          // Store bike data for popup
          bikeCard.dataset.bikeData = JSON.stringify(bike);

          const statusClass =
            bike.status === "Available"
              ? "status-available"
              : bike.status === "Sold Out"
                ? "status-sold"
                : bike.status === "Coming Soon"
                  ? "status-coming-soon"
                  : "status-available";

          // Get non-empty image URLs
          const images = (bike.imageUrl || []).filter(
            (url) => url && url.trim() !== "",
          );
          if (images.length === 0) {
            images.push("https://via.placeholder.com/300?text=No+Image");
          }

          bikeCard.innerHTML = `
    <div class="image-container">
      <div class="status-badge ${statusClass}">${bike.status}</div>
      <div class="bike-slider">
        <div class="slider-images">
          ${images
            .map(
              (img) => `
            <img src="${img}" alt="${bike.brand} ${bike.model}" loading="lazy">
          `,
            )
            .join("")}
        </div>
        ${
          images.length > 1
            ? `
        <div class="slider-dots">
          ${images
            .map(
              (_, index) => `
            <span class="dot" data-index="${index}"></span>
          `,
            )
            .join("")}
        </div>
        ${
          images.length > 1
            ? `
  <div class="slider-dots">
    ${images
      .map(
        (_, index) => `
      <span class="dot" data-index="${index}"></span>
    `,
      )
      .join("")}
  </div>
  <button class="slider-prev"><i class="fas fa-chevron-left"></i></button>
  <button class="slider-next"><i class="fas fa-chevron-right"></i></button>
`
            : ""
        }
        `
            : ""
        }
      </div>
      
    </div>
    <div class="card-content">
      <h3>${bike.brand} ${bike.model}</h3>
      <span class="model">${bike.modelYear} Model</span>
      <div class="details">
        <div class="detail-item">
          <i class="fas fa-tachometer-alt"></i>
          <span>${(bike.kmDriven || 0).toLocaleString()} km</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-user"></i>
          <span>${formatOwnership(bike.ownership || "1")}</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-gas-pump"></i>
          <span>${bike.fuelType || "Petrol"}</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-calendar-alt"></i>
          <span>${formatAge(bike.daysOld || 0)}</span>
        </div>
      </div>
      <div class="price-container">
        <div class="price">₹${(bike.price || 0).toLocaleString()}</div>
        <div class="emi">Down: ₹${(
          bike.downPayment || 0
        ).toLocaleString()} | EMI: ₹${(
          bike.emiAmount || 0
        ).toLocaleString()}/month</div>
        <div class="button-group">
          <button class="contact-btn" ${
            bike.status !== "Available" ? "disabled" : ""
          }>
            Book Now
          </button>
          <button class="view-details-btn" ${
            bike.status !== "Available" ? "disabled" : ""
          }>
            View Details
          </button>
        </div>
      </div>
    </div>
  `;
          return bikeCard;
        }

        // Helper function to format ownership
        function formatOwnership(owner) {
          if (owner === "1") return "1st Owner";
          if (owner === "2") return "2nd Owner";
          if (owner === "3") return "3+ Owner";
          return owner;
        }

        function addBikeCardClickListeners() {
          document.querySelectorAll(".bike-card").forEach((card) => {
            const viewDetailsBtn = card.querySelector(".view-details-btn");
            const contactBtn = card.querySelector(".contact-btn");

            if (viewDetailsBtn && !viewDetailsBtn.disabled) {
              viewDetailsBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                const bikeData = JSON.parse(card.dataset.bikeData);
                // Navigate to vehicle detail page by id
                if (bikeData && bikeData._id) {
                  window.location.href = `vehicledetail.html?id=${encodeURIComponent(bikeData._id)}`;
                } else {
                  // fallback to popup if id missing
                  showBikePopup(bikeData);
                }
              });
            }

            if (contactBtn && !contactBtn.disabled) {
              contactBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                const bikeData = JSON.parse(card.dataset.bikeData);
                window.location.href = `book.html?bikeId=${bikeData._id}`;
              });
            }
          });
        }

        // Show bike details popup
        function showBikePopup(bike) {
          const popup = document.querySelector(".bike-popup-overlay");

          // Get non-empty image URLs
          const images = (bike.imageUrl || []).filter(
            (url) => url && url.trim() !== "",
          );
          if (images.length === 0) {
            images.push("https://via.placeholder.com/600x400?text=No+Image");
          }

          // Populate popup with bike data
          document.getElementById("popup-bike-title").textContent =
            `${bike.brand} ${bike.model}`;
          document.getElementById("popup-bike-model").textContent =
            `${bike.modelYear} Model`;
          document.getElementById("popup-bike-km").textContent = `${(
            bike.kmDriven || 0
          ).toLocaleString()} km`;
          document.getElementById("popup-bike-owner").textContent =
            formatOwnership(bike.ownership || "1");
          document.getElementById("popup-bike-fuel").textContent =
            bike.fuelType || "Petrol";
          document.getElementById("popup-bike-age").textContent = formatAge(
            bike.daysOld || 0,
          );
          document.getElementById("popup-bike-price").textContent = `₹${(
            bike.price || 0
          ).toLocaleString()}`;
          document.getElementById("popup-bike-emi").textContent = `Down: ₹${(
            bike.downPayment || 0
          ).toLocaleString()} | EMI: ₹${Math.round(
            ((bike.price || 0) - (bike.downPayment || 0)) / 36,
          ).toLocaleString()}/month`;

          // Create slider HTML
          const sliderContainer = document.querySelector(
            ".popup-image-container",
          );
          sliderContainer.innerHTML = `
    <div class="popup-slider">
      ${images
        .map(
          (img) => `
        <div class="slide">
          <img src="${img}" alt="${bike.brand} ${bike.model}">
        </div>
      `,
        )
        .join("")}
    </div>
  `;

          // Initialize popup slider
          initPopupSlider();

          // Show popup
          popup.classList.add("active");
          document.body.style.overflow = "hidden";
        }

        // Close popup functionality
        function initPopupClose() {
          const popup = document.querySelector(".bike-popup-overlay");
          const closeBtn = document.querySelector(".close-popup");

          closeBtn.addEventListener("click", closePopup);

          popup.addEventListener("click", (e) => {
            if (e.target === popup) {
              closePopup();
            }
          });

          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              closePopup();
            }
          });
        }

        function closePopup() {
          const popup = document.querySelector(".bike-popup-overlay");
          popup.classList.remove("active");
          document.body.style.overflow = "";
        }

        // Image slider function from reference
        function initImageSliders() {
          document
            .querySelectorAll(".car-slider, .bike-slider")
            .forEach((slider) => {
              const images = slider.querySelector(".slider-images");
              const dots = slider.querySelectorAll(".dot");
              const prevBtn = slider.querySelector(".slider-prev");
              const nextBtn = slider.querySelector(".slider-next");

              if (!images || !prevBtn || !nextBtn) return;

              let currentIndex = 0;

              function showSlide(index) {
                images.style.transform = `translateX(-${index * 100}%)`;
                dots.forEach((dot) => dot.classList.remove("active"));
                if (dots[index]) dots[index].classList.add("active");
                currentIndex = index;
              }

              // Initialize first slide
              showSlide(0);

              dots.forEach((dot) => {
                dot.addEventListener("click", () => {
                  showSlide(parseInt(dot.dataset.index));
                });
              });

              prevBtn.addEventListener("click", () => {
                const newIndex = (currentIndex - 1 + dots.length) % dots.length;
                showSlide(newIndex);
              });

              nextBtn.addEventListener("click", () => {
                const newIndex = (currentIndex + 1) % dots.length;
                showSlide(newIndex);
              });
            });
        }

        function initPopupSlider() {
          const slider = document.querySelector(".popup-slider");
          if (!slider) return;

          const images = slider.querySelector(".popup-slider-images");
          const dots = slider.querySelectorAll(".popup-dot");
          const prevBtn = slider.querySelector(".popup-slider-prev");
          const nextBtn = slider.querySelector(".popup-slider-next");

          if (!images || !prevBtn || !nextBtn) return;

          let currentIndex = 0;

          function showSlide(index) {
            images.style.transform = `translateX(-${index * 100}%)`;
            dots.forEach((dot) => dot.classList.remove("active"));
            if (dots[index]) dots[index].classList.add("active");
            currentIndex = index;
          }

          // Initialize first slide
          showSlide(0);

          // Dot click event
          dots.forEach((dot) => {
            dot.addEventListener("click", () => {
              showSlide(parseInt(dot.dataset.index));
            });
          });

          // Previous button
          prevBtn.addEventListener("click", () => {
            const newIndex = (currentIndex - 1 + dots.length) % dots.length;
            showSlide(newIndex);
          });

          // Next button
          nextBtn.addEventListener("click", () => {
            const newIndex = (currentIndex + 1) % dots.length;
            showSlide(newIndex);
          });
        }

        // Show no bikes message
        function showNoBikesMessage() {
          const bikeGrid = document.querySelector(".bike-grid");
          bikeGrid.innerHTML = `
      <div class="no-bikes-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <i class="fas fa-motorcycle" style="font-size: 4rem; color: #ccc; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">No Bikes Available</h3>
        <p style="color: #999;">New bikes coming soon! Check back later.</p>
      </div>
    `;
        }

        // Show error message
        function showErrorMessage() {
          const bikeGrid = document.querySelector(".bike-grid");
          bikeGrid.innerHTML = `
      <div class="error-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <i class="fas fa-exclamation-triangle" style="font-size: 4rem; color: #ff6b00; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">Failed to Load Bikes</h3>
        <p style="color: #999; margin-bottom: 20px;">Please check your connection and try again.</p>
        <button onclick="location.reload()" style="background: #ff6b00; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
          Retry
        </button>
      </div>
    `;
        }

        // Update bike count
        function updateBikeCount(count) {
          const rangeLabel = (function () {
            try {
              const min = currentFilters.minPrice;
              const max = currentFilters.maxPrice;
              if (min && max) {
                return `₹${Number(min).toLocaleString()} — ₹${Number(max).toLocaleString()}`;
              }
              if (min && !max) {
                return `₹${Number(min).toLocaleString()}+`;
              }
              if (!min && max) {
                return `Under ₹${Number(max).toLocaleString()}`;
              }
            } catch (e) {}
            return null;
          })();

          const noun = count === 1 ? "bike" : "bikes";
          const rangePart = rangeLabel ? ` under ${rangeLabel}` : "";
          document.getElementById("filtered-count").textContent = `${count} second hand ${noun} Available${rangePart}`;
        }

        // Filter functionality
        function initFilters() {
          const filterButtons = document.querySelectorAll(".filter-btn");
          const filterDropdowns = document.querySelectorAll(".filter-dropdown");

          // Toggle filter dropdowns
          filterButtons.forEach((button) => {
            button.addEventListener("click", function (e) {
              e.stopPropagation();
              const filterType = this.dataset.filter;
              const dropdown = document.getElementById(
                `${filterType}-dropdown`,
              );

              // Close all dropdowns first
              filterDropdowns.forEach((d) => {
                d.style.display = "none";
              });
              filterButtons.forEach((btn) => {
                btn.classList.remove("active");
              });

              // If "All Bikes" was clicked
              if (filterType === "all") {
                resetFilters();
                displayBikes(allBikes);
                updateBikeCount(allBikes.length);
                return;
              }

              // Toggle the clicked dropdown
              if (dropdown.style.display === "block") {
                dropdown.style.display = "none";
                this.classList.remove("active");
              } else {
                dropdown.style.display = "block";
                this.classList.add("active");
              }
            });
          });

          // Close dropdowns when clicking outside
          document.addEventListener("click", function (e) {
            if (
              !e.target.closest(".filter-btn") &&
              !e.target.closest(".filter-dropdown")
            ) {
              filterDropdowns.forEach((dropdown) => {
                dropdown.style.display = "none";
              });
              filterButtons.forEach((btn) => {
                btn.classList.remove("active");
              });
            }
          });

          // Initialize specific filters
          initPriceFilter();
          initBrandFilter();
          initYearFilter();
          initKmFilter();
          initOwnerFilter();
          initFuelFilter();
          initBrandLogos();
        }

        function initBrandLogos() {
          document.querySelectorAll(".brand-logo").forEach((logo) => {
            logo.addEventListener("click", function () {
              const brand = this.dataset.brand;
              currentFilters.brand = brand;

              // Clear any existing search term from URL
              if (window.location.search.includes("search=")) {
                window.history.pushState(
                  {},
                  "",
                  "https://www.bikebuilders.in/inventory.html",
                );
              }

              applyAllFilters();

              // Update UI
              document.querySelectorAll(".brand-logo").forEach((l) => {
                l.classList.remove("active");
              });
              this.classList.add("active");

              // Update brand filter button text
              const brandBtn = document.querySelector('[data-filter="brand"]');
              if (brandBtn)
                brandBtn.innerHTML = `${brand} <i class="fas fa-chevron-down"></i>`;
            });
          });
        }

        // Render brand counts next to each logo. Expects `bikes` array where each
        // bike has a `brand` property. This function normalizes brand strings for
        // matching and updates the DOM.
        function renderBrandCounts(bikes) {
          try {
            const counts = {};
            (bikes || []).forEach((b) => {
              const brand = (b.brand || "").toString().trim();
              if (!brand) return;
              const key = normalizeBrand(brand);
              counts[key] = (counts[key] || 0) + 1;
            });

            document.querySelectorAll(".brand-logo").forEach((el) => {
              const brand = (el.dataset.brand || "").toString().trim();
              const key = normalizeBrand(brand);
              const count = counts[key] || 0;

              // Build pill content: logo + name + count
              const img = el.querySelector("img");
              const imgSrc = img ? img.getAttribute("src") : "";

              // Minimal layout: brand image + small numeric badge (count)
              el.classList.remove("brand-pill");
              el.classList.add("brand-simple");
              el.innerHTML = `
                <div class="brand-simple-inner">
                  <img src="${imgSrc}" alt="${brand}" />
                  <span class="brand-count-badge">${count} Bikes</span>
                </div>
              `;
            });
          } catch (e) {
            console.warn("renderBrandCounts error", e);
          }
        }

        // Price filter
        function initPriceFilter() {
          const minPriceInput = document.getElementById("min-price");
          const maxPriceInput = document.getElementById("max-price");

          if (minPriceInput && maxPriceInput) {
            minPriceInput.addEventListener("input", applyPriceFilter);
            maxPriceInput.addEventListener("input", applyPriceFilter);

            document.querySelectorAll(".price-preset").forEach((preset) => {
              preset.addEventListener("click", function () {
                minPriceInput.value = this.dataset.min;
                maxPriceInput.value = this.dataset.max || "";
                applyPriceFilter();
              });
            });
          }
        }

        // Initialize search functionality
        function initSearch() {
          const searchInput = document.getElementById("inventory-search");
          const searchBtn = document.getElementById("search-btn");

          // Handle search button click
          searchBtn.addEventListener("click", () => {
            const searchTerm = searchInput.value.trim();
            if (searchTerm) {
              // Update URL with search parameter
              window.history.pushState(
                {},
                "",
                `inventory.html?search=${encodeURIComponent(searchTerm)}`,
              );
              applyAllFilters();
            }
          });

          searchInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
              const searchTerm = searchInput.value.trim();
              if (searchTerm) {
                window.history.pushState(
                  {},
                  "",
                  `inventory.html?search=${encodeURIComponent(searchTerm)}`,
                );
                applyAllFilters();
              }
            }
          });

          // Check for search term in URL on page load
          const urlParams = new URLSearchParams(window.location.search);
          const searchTerm = urlParams.get("search");
          if (searchTerm) {
            searchInput.value = searchTerm;
            applyAllFilters();
          }
        }
        // Mobile filter functionality
        function initMobileFilters() {
          const mobileFilterBtn = document.createElement("button");
          mobileFilterBtn.className = "mobile-filter-btn";
          mobileFilterBtn.innerHTML = '<i class="fas fa-filter"></i> Filters';

          // Add the button to the search container
          const searchContainer = document.querySelector(".search-container");
          if (searchContainer) {
            searchContainer.appendChild(mobileFilterBtn);
          }

          // Mobile filter toggle
          const mobileFiltersContainer = document.querySelector(
            ".mobile-filters-container",
          );
          const closeFiltersBtn = document.querySelector(".close-filters-btn");

          if (mobileFilterBtn && mobileFiltersContainer && closeFiltersBtn) {
            mobileFilterBtn.addEventListener("click", function () {
              mobileFiltersContainer.style.display = "block";
              document.body.style.overflow = "hidden";
            });

            closeFiltersBtn.addEventListener("click", function () {
              mobileFiltersContainer.style.display = "none";
              document.body.style.overflow = "";
            });

            mobileFiltersContainer.addEventListener("click", function (e) {
              if (e.target === mobileFiltersContainer) {
                mobileFiltersContainer.style.display = "none";
                document.body.style.overflow = "";
              }
            });
          }

          // Initialize mobile filter controls
          initMobilePriceFilter();
          initMobileBrandFilter();
          initMobileYearFilter();
          initMobileKmFilter();
          initMobileOwnerFilter();
          initMobileFuelFilter();
        }

        // Mobile price filter
        function initMobilePriceFilter() {
          const minPriceInput = document.getElementById("min-price-mobile");
          const maxPriceInput = document.getElementById("max-price-mobile");

          if (minPriceInput && maxPriceInput) {
            minPriceInput.addEventListener("input", applyPriceFilterMobile);
            maxPriceInput.addEventListener("input", applyPriceFilterMobile);

            document
              .querySelectorAll("#price-dropdown-mobile .price-preset")
              .forEach((preset) => {
                preset.addEventListener("click", function () {
                  minPriceInput.value = this.dataset.min;
                  maxPriceInput.value = this.dataset.max || "";
                  applyPriceFilterMobile();
                });
              });
          }
        }

        function applyPriceFilterMobile() {
          const minPrice =
            parseInt(document.getElementById("min-price-mobile").value) || 0;
          const maxPrice =
            parseInt(document.getElementById("max-price-mobile").value) ||
            Infinity;

          currentFilters.minPrice = minPrice;
          currentFilters.maxPrice = maxPrice;

          applyAllFilters();
          document.querySelector(".mobile-filters-container").style.display =
            "none";
          document.body.style.overflow = "";
        }

        // Mobile brand filter
        function initMobileBrandFilter() {
          document
            .querySelectorAll("#brand-dropdown-mobile .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const brand = this.dataset.brand;
                currentFilters.brand =
                  brand === currentFilters.brand ? null : brand;
                applyAllFilters();

                // Update button text
                const brandBtn = document.querySelector(
                  '[data-filter="brand"]',
                );
                brandBtn.innerHTML = currentFilters.brand
                  ? `${brand} <i class="fas fa-chevron-down"></i>`
                  : `Brand <i class="fas fa-chevron-down"></i>`;

                document.querySelector(
                  ".mobile-filters-container",
                ).style.display = "none";
                document.body.style.overflow = "";
              });
            });
        }

        // Mobile year filter
        function initMobileYearFilter() {
          const yearMin = document.getElementById("year-min-mobile");
          const yearMax = document.getElementById("year-max-mobile");
          const yearMinValue = document.getElementById("year-min-value-mobile");
          const yearMaxValue = document.getElementById("year-max-value-mobile");

          if (yearMin && yearMax) {
            yearMin.addEventListener("input", function () {
              yearMinValue.textContent = this.value;
              currentFilters.minYear = parseInt(this.value);
              applyAllFilters();
            });

            yearMax.addEventListener("input", function () {
              yearMaxValue.textContent = this.value;
              currentFilters.maxYear = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Mobile km filter
        function initMobileKmFilter() {
          const kmMin = document.getElementById("km-min-mobile");
          const kmMax = document.getElementById("km-max-mobile");
          const kmMinValue = document.getElementById("km-min-value-mobile");
          const kmMaxValue = document.getElementById("km-max-value-mobile");

          if (kmMin && kmMax) {
            kmMin.addEventListener("input", function () {
              kmMinValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.minKm = parseInt(this.value);
              applyAllFilters();
            });

            kmMax.addEventListener("input", function () {
              kmMaxValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.maxKm = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Mobile owner filter
        function initMobileOwnerFilter() {
          document
            .querySelectorAll("#owner-dropdown-mobile .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const owner = this.dataset.owner;
                currentFilters.owner =
                  owner === currentFilters.owner ? null : owner;
                applyAllFilters();

                // Update button text if needed
                const ownerBtn = document.querySelector(
                  '[data-filter="owner"]',
                );
                if (ownerBtn) {
                  ownerBtn.innerHTML = currentFilters.owner
                    ? `${formatOwnership(
                        owner,
                      )} <i class="fas fa-chevron-down"></i>`
                    : `Ownership <i class="fas fa-chevron-down"></i>`;
                }

                document.querySelector(
                  ".mobile-filters-container",
                ).style.display = "none";
                document.body.style.overflow = "";
              });
            });
        }

        // Mobile fuel filter
        function initMobileFuelFilter() {
          document
            .querySelectorAll("#fuel-dropdown-mobile .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const fuel = this.dataset.fuel;
                currentFilters.fuel =
                  fuel === currentFilters.fuel ? null : fuel;
                applyAllFilters();

                // Update button text if needed
                const fuelBtn = document.querySelector('[data-filter="fuel"]');
                if (fuelBtn) {
                  fuelBtn.innerHTML = currentFilters.fuel
                    ? `${fuel} <i class="fas fa-chevron-down"></i>`
                    : `Fuel Type <i class="fas fa-chevron-down"></i>`;
                }

                document.querySelector(
                  ".mobile-filters-container",
                ).style.display = "none";
                document.body.style.overflow = "";
              });
            });
        }

        function applyPriceFilter() {
          const minPrice =
            parseInt(document.getElementById("min-price").value) || 0;
          const maxPrice =
            parseInt(document.getElementById("max-price").value) || Infinity;

          currentFilters.minPrice = minPrice;
          currentFilters.maxPrice = maxPrice;

          applyAllFilters();
        }

        // Brand filter
        function initBrandFilter() {
          document
            .querySelectorAll(".brand-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const brand = this.dataset.brand;
                currentFilters.brand =
                  brand === currentFilters.brand ? null : brand;
                applyAllFilters();

                // Update button text
                const brandBtn = document.querySelector(
                  '[data-filter="brand"]',
                );
                brandBtn.innerHTML = currentFilters.brand
                  ? `${brand} <i class="fas fa-chevron-down"></i>`
                  : `Brand <i class="fas fa-chevron-down"></i>`;

                // Update brand logos
                document.querySelectorAll(".brand-logo").forEach((logo) => {
                  logo.classList.remove("active");
                  try {
                    if (
                      currentFilters.brand &&
                      normalizeBrand(logo.dataset.brand) ===
                        normalizeBrand(currentFilters.brand)
                    ) {
                      logo.classList.add("active");
                    }
                  } catch (e) {
                    // ignore
                  }
                });
              });
            });
        }

        // Year filter
        function initYearFilter() {
          const yearMin = document.getElementById("year-min");
          const yearMax = document.getElementById("year-max");
          const yearMinValue = document.getElementById("year-min-value");
          const yearMaxValue = document.getElementById("year-max-value");

          if (yearMin && yearMax) {
            yearMin.addEventListener("input", function () {
              yearMinValue.textContent = this.value;
              currentFilters.minYear = parseInt(this.value);
              applyAllFilters();
            });

            yearMax.addEventListener("input", function () {
              yearMaxValue.textContent = this.value;
              currentFilters.maxYear = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // KM filter
        function initKmFilter() {
          const kmMin = document.getElementById("km-min");
          const kmMax = document.getElementById("km-max");
          const kmMinValue = document.getElementById("km-min-value");
          const kmMaxValue = document.getElementById("km-max-value");

          if (kmMin && kmMax) {
            kmMin.addEventListener("input", function () {
              kmMinValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.minKm = parseInt(this.value);
              applyAllFilters();
            });

            kmMax.addEventListener("input", function () {
              kmMaxValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.maxKm = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Owner filter
        function initOwnerFilter() {
          document
            .querySelectorAll(".ownership-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const owner = this.dataset.owner;
                currentFilters.owner =
                  owner === currentFilters.owner ? null : owner;
                applyAllFilters();

                // Update button text if needed
                const ownerBtn = document.querySelector(
                  '[data-filter="owner"]',
                );
                if (ownerBtn) {
                  ownerBtn.innerHTML = currentFilters.owner
                    ? `${formatOwnership(
                        owner,
                      )} <i class="fas fa-chevron-down"></i>`
                    : `Ownership <i class="fas fa-chevron-down"></i>`;
                }
              });
            });
        }

        // Fuel filter
        function initFuelFilter() {
          document
            .querySelectorAll(".fuel-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const fuel = this.dataset.fuel;
                currentFilters.fuel =
                  fuel === currentFilters.fuel ? null : fuel;
                applyAllFilters();

                // Update button text if needed
                const fuelBtn = document.querySelector('[data-filter="fuel"]');
                if (fuelBtn) {
                  fuelBtn.innerHTML = currentFilters.fuel
                    ? `${fuel} <i class="fas fa-chevron-down"></i>`
                    : `Fuel Type <i class="fas fa-chevron-down"></i>`;
                }
              });
            });
        }

        function getSearchParam() {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get("search")?.toLowerCase() || "";
        }

        function applyAllFilters() {
          if (!allBikes || !Array.isArray(allBikes)) {
            console.warn("allBikes is not ready or not an array:", allBikes);
            if (!allBikes) {
              allBikes = [];
            }
            if (!Array.isArray(allBikes)) {
              console.error(
                "allBikes is not an array. Type:",
                typeof allBikes,
                "Value:",
                allBikes,
              );
              if (
                allBikes &&
                typeof allBikes === "object" &&
                Array.isArray(allBikes.bikes)
              ) {
                allBikes = allBikes.bikes;
              } else {
                allBikes = [];
              }
            }
          }

          if (allBikes.length === 0) {
            displayBikes([]);
            updateBikeCount(0);
            return;
          }

          try {
            const searchTerm = getSearchParam().trim().toLowerCase();

            const filteredBikes = allBikes.filter((bike) => {
              if (!bike || typeof bike !== "object") {
                console.warn("Invalid bike object:", bike);
                return false;
              }

              if (searchTerm) {
                const brand = (bike.brand || "").toLowerCase();
                const model = (bike.model || "").toLowerCase();

                const searchMatch =
                  model.includes(searchTerm) ||
                  `${brand} ${model}`.includes(searchTerm) ||
                  model
                    .replace(/\s+/g, "")
                    .includes(searchTerm.replace(/\s+/g, ""));

                if (!searchMatch) return false;
              }

              const price = bike.price || 0;
              const year = bike.modelYear || new Date().getFullYear();
              const km = bike.kmDriven || 0;
              const brand = normalizeBrand(bike.brand || "");
              const owner = bike.ownership || "";
              const fuel = bike.fuelType || "";
              const priceMatch =
                (!currentFilters.minPrice ||
                  price >= currentFilters.minPrice) &&
                (!currentFilters.maxPrice || price <= currentFilters.maxPrice);

              const yearMatch =
                (!currentFilters.minYear || year >= currentFilters.minYear) &&
                (!currentFilters.maxYear || year <= currentFilters.maxYear);

              const kmMatch =
                (!currentFilters.minKm || km >= currentFilters.minKm) &&
                (!currentFilters.maxKm || km <= currentFilters.maxKm);

              const brandMatch = (function () {
                if (!currentFilters.brand) return true;
                return normalizeBrand(currentFilters.brand) === brand;
              })();

              const ownerMatch =
                !currentFilters.owner || owner.includes(currentFilters.owner);

              const fuelMatch =
                !currentFilters.fuel || fuel === currentFilters.fuel;
              const statusMatch =
                !currentFilters.status || bike.status === currentFilters.status;

              return (
                priceMatch &&
                yearMatch &&
                kmMatch &&
                brandMatch &&
                ownerMatch &&
                fuelMatch &&
                statusMatch
              );
            });

            const sortedBikes = sortBikes(filteredBikes, currentSort);
            displayBikes(sortedBikes);
            updateBikeCount(sortedBikes.length);

            if (searchTerm) {
              showSearchTerm(searchTerm);
            }
          } catch (error) {
            console.error("Error in applyAllFilters:", error);
            displayBikes([]);
            updateBikeCount(0);
          }
        }

        function sortBikes(bikes, sortType) {
          switch (sortType) {
            case "price-low":
              return [...bikes].sort((a, b) => (a.price || 0) - (b.price || 0));
            case "price-high":
              return [...bikes].sort((a, b) => (b.price || 0) - (a.price || 0));
            case "year-new":
              return [...bikes].sort(
                (a, b) => (b.modelYear || 0) - (a.modelYear || 0),
              );
            case "year-old":
              return [...bikes].sort(
                (a, b) => (a.modelYear || 0) - (b.modelYear || 0),
              );
            default:
              return bikes;
          }
        }

        function showSearchTerm(term) {
          const existingDisplay = document.querySelector(
            ".search-term-display",
          );
          if (existingDisplay) {
            existingDisplay.remove();
          }

          const searchContainer = document.createElement("div");
          searchContainer.className = "search-term-display";

          const searchText = document.createElement("span");
          searchText.textContent = `Showing results for: ${term}`;
          searchText.className = "search-term-text";

          const clearBtn = document.createElement("button");
          clearBtn.className = "clear-search-btn";
          clearBtn.innerHTML = "&times;";
          clearBtn.title = "Clear search";
          clearBtn.addEventListener("click", () => {
            window.location.href = "https://www.bikebuilders.in/inventory.html";
          });

          searchContainer.appendChild(searchText);
          searchContainer.appendChild(clearBtn);

          const sectionHeader = document.querySelector(".section-header");
          if (sectionHeader) {
            sectionHeader.insertBefore(
              searchContainer,
              sectionHeader.firstChild,
            );
          }
        }

        function resetFilters() {
          currentFilters = {
            brand: null,
            minPrice: 0,
            maxPrice: Infinity,
            minYear: 2015,
            maxYear: 2024,
            minKm: 0,
            maxKm: 50000,
            owner: null,
            fuel: null,
          };

          // Reset form inputs
          document.getElementById("min-price").value = "";
          document.getElementById("max-price").value = "";
          document.getElementById("year-min").value = "2015";
          document.getElementById("year-max").value = "2024";
          document.getElementById("km-min").value = "0";
          document.getElementById("km-max").value = "50000";

          // Reset display values
          document.getElementById("year-min-value").textContent = "2015";
          document.getElementById("year-max-value").textContent = "2024";
          document.getElementById("km-min-value").textContent = "0";
          document.getElementById("km-max-value").textContent = "50,000";

          // Reset all filter button texts
          const brandBtn = document.querySelector('[data-filter="brand"]');
          brandBtn.innerHTML = `Brand <i class="fas fa-chevron-down"></i>`;

          const ownerBtn = document.querySelector('[data-filter="owner"]');
          if (ownerBtn) {
            ownerBtn.innerHTML = `Ownership <i class="fas fa-chevron-down"></i>`;
          }

          const fuelBtn = document.querySelector('[data-filter="fuel"]');
          if (fuelBtn) {
            fuelBtn.innerHTML = `Fuel Type <i class="fas fa-chevron-down"></i>`;
          }

          // Reset brand logos
          document.querySelectorAll(".brand-logo").forEach((logo) => {
            logo.classList.remove("active");
          });
        }

        // Format age for display
        function formatAge(days) {
          if (days >= 365) {
            const years = Math.floor(days / 365);
            return `${years} year${years > 1 ? "s" : ""}`;
          } else if (days >= 30) {
            const months = Math.floor(days / 30);
            return `${months} month${months > 1 ? "s" : ""}`;
          } else {
            return `${days} day${days !== 1 ? "s" : ""}`;
          }
        }

        // Initialize everything
        loadBikes();
        initFilters();
        initPopupClose();
        initSortDropdown(); // Now this will work properly
        initSearch(); // Initialize search functionality
        initMobileFilters(); // Add this line
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggleBtn = document.createElement("button");
        toggleBtn.className = "mobile-menu-toggle";
        toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';

        const navbar = document.querySelector(".navbar");
        navbar.appendChild(toggleBtn);

        const mobileMenu = document.createElement("div");
        mobileMenu.className = "mobile-menu";
        mobileMenu.innerHTML = `<button class="close-btn"><i class="fas fa-times"></i></button>
          <ul class="nav-links">
            <li><a href="https://www.bikebuilders.in/" class="active" data-translate="Home">Home</a></li>
            <li><a href="https://www.bikebuilders.in/inventory.html" data-translate="Buy Bike">Buy Bike</a></li>
            <li><a href="https://www.bikebuilders.in/sell.html" data-translate="Sell Your Bike">Sell Your Bike</a></li>
            <li>
                  <a
                    href="https://www.bikebuilders.in/about.html"
                    aria-label="About Bike Builders"
                    data-translate="About Us"
                    >About Us</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.bikebuilders.in/book.html"
                    aria-label="Book Bike"
                    data-translate="Book Bike"
                    >Book Bike</a
                  >
                </li>
                      <li><a href="https://www.bikebuilders.in/updates.html" data-translate="Updates">Updates</a></li>
              <li><a href="https://www.bikebuilders.in/contact.html" data-translate="Contact">Contact</a></li>
          </ul>
          <div class="login-btn">
            <button data-translate="Get the Quote">Get the Quote</button>
          </div>
          
          `;

        document.body.appendChild(mobileMenu);
        toggleBtn.addEventListener("click", function () {
          mobileMenu.classList.add("active");
        });

        mobileMenu
          .querySelector(".close-btn")
          .addEventListener("click", function () {
            mobileMenu.classList.remove("active");
          });
      });
      // Add this function near the top of your script section
      function formatAge(days) {
        if (days >= 365) {
          const years = Math.floor(days / 365);
          return `${years} year${years > 1 ? "s" : ""}`;
        } else if (days >= 30) {
          const months = Math.floor(days / 30);
          return `${months} month${months > 1 ? "s" : ""}`;
        } else {
          return `${days} day${days !== 1 ? "s" : ""}`;
        }
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const darkModeToggle = document.getElementById("darkModeToggle");
        const mobileDarkModeToggle = document.getElementById(
          "mobileDarkModeToggle",
        );

        // Check for saved user preference or system preference
        function checkDarkModePreference() {
          const savedTheme = localStorage.getItem("theme");
          const systemPrefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;

          if (savedTheme === "dark" || (!savedTheme && systemPrefersDark)) {
            document.body.classList.add("dark-mode");
            if (darkModeToggle) darkModeToggle.checked = true;
            if (mobileDarkModeToggle) mobileDarkModeToggle.checked = true;
          }
        }

        // Initialize dark mode
        checkDarkModePreference();

        // Desktop toggle
        if (darkModeToggle) {
          darkModeToggle.addEventListener("change", function () {
            if (this.checked) {
              document.body.classList.add("dark-mode");
              localStorage.setItem("theme", "dark");
            } else {
              document.body.classList.remove("dark-mode");
              localStorage.setItem("theme", "light");
            }
            // Sync mobile toggle
            if (mobileDarkModeToggle) {
              mobileDarkModeToggle.checked = this.checked;
            }
          });
        }

        // Mobile toggle
        if (mobileDarkModeToggle) {
          mobileDarkModeToggle.addEventListener("change", function () {
            if (this.checked) {
              document.body.classList.add("dark-mode");
              localStorage.setItem("theme", "dark");
            } else {
              document.body.classList.remove("dark-mode");
              localStorage.setItem("theme", "light");
            }
            // Sync desktop toggle
            if (darkModeToggle) {
              darkModeToggle.checked = this.checked;
            }
          });
        }

        // Watch for system theme changes
        window
          .matchMedia("(prefers-color-scheme: dark)")
          .addEventListener("change", (e) => {
            const newColorScheme = e.matches ? "dark" : "light";
            if (!localStorage.getItem("theme")) {
              // Only if user hasn't set a preference
              if (newColorScheme === "dark") {
                document.body.classList.add("dark-mode");
                if (darkModeToggle) darkModeToggle.checked = true;
                if (mobileDarkModeToggle) mobileDarkModeToggle.checked = true;
              } else {
                document.body.classList.remove("dark-mode");
                if (darkModeToggle) darkModeToggle.checked = false;
                if (mobileDarkModeToggle) mobileDarkModeToggle.checked = false;
              }
            }
          });
      });
    </script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-ETL311CBE6"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-ETL311CBE6");
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get modal elements
        const whatsappModal = document.getElementById("whatsappModal");
        const callModal = document.getElementById("callModal");

        // Get trigger buttons
        const whatsappTrigger = document.getElementById("whatsappTrigger");
        const callTrigger = document.getElementById("callTrigger");

        // Get close buttons
        const closeButtons = document.getElementsByClassName("close");

        // When user clicks WhatsApp button
        whatsappTrigger.addEventListener("click", function (e) {
          e.preventDefault();
          whatsappModal.style.display = "block";
        });

        // When user clicks Call button
        callTrigger.addEventListener("click", function (e) {
          e.preventDefault();
          callModal.style.display = "block";
        });

        // When user clicks on close button
        Array.from(closeButtons).forEach((button) => {
          button.addEventListener("click", function () {
            whatsappModal.style.display = "none";
            callModal.style.display = "none";
          });
        });

        // When user clicks outside the modal
        window.addEventListener("click", function (event) {
          if (event.target == whatsappModal) {
            whatsappModal.style.display = "none";
          }
          if (event.target == callModal) {
            callModal.style.display = "none";
          }
        });

        // Handle number selection for WhatsApp
        const whatsappOptions =
          whatsappModal.querySelectorAll(".number-option");
        whatsappOptions.forEach((option) => {
          option.addEventListener("click", function () {
            const number = this.getAttribute("data-number");
            window.open(`https://wa.me/${number}`, "_blank");
            whatsappModal.style.display = "none";
          });
        });

        // Handle number selection for Call
        const callOptions = callModal.querySelectorAll(".number-option");
        callOptions.forEach((option) => {
          option.addEventListener("click", function () {
            const number = this.getAttribute("data-number");
            window.location.href = `tel:${number}`;
            callModal.style.display = "none";
          });
        });
      });
    </script>
    <div class="bike-popup-overlay">
      <div class="bike-popup">
        <button class="close-popup">&times;</button>
        <div class="popup-content">
          <div class="popup-image-container">
            <img id="popup-bike-image" src="" alt="Bike Image" />
          </div>
          <div class="popup-details">
            <h2 id="popup-bike-title"></h2>
            <span class="model" id="popup-bike-model"></span>
            <div class="details">
              <div class="detail-item">
                <i class="fas fa-tachometer-alt"></i>
                <span id="popup-bike-km"></span>
              </div>
              <div class="detail-item">
                <i class="fas fa-user"></i>
                <span id="popup-bike-owner"></span>
              </div>
              <div class="detail-item">
                <i class="fas fa-gas-pump"></i>
                <span id="popup-bike-fuel"></span>
              </div>
              <div class="detail-item">
                <i class="fas fa-calendar-alt"></i>
                <span id="popup-bike-age"></span>
              </div>
            </div>
            <div class="price-container">
              <div class="price" id="popup-bike-price"></div>
              <div class="emi" id="popup-bike-emi"></div>
            </div>

            <button class="contact-btn">Contact Seller</button>
          </div>
        </div>
      </div>
    </div>
    <div class="floating-buttons">
      <a
        href="#"
        class="floating-btn whatsapp-btn"
        data-tooltip="Chat on WhatsApp"
        aria-label="Chat on WhatsApp"
        id="whatsappTrigger"
      >
        <i class="fa-brands fa-whatsapp fa-bounce"></i>
      </a>

      <!-- YouTube Button (unchanged) -->
      <a
        href="https://youtube.com/@bikebuilders-vo2nm?feature=shared"
        class="floating-btn youtube-btn"
        data-tooltip="Watch on YouTube"
        aria-label="Watch on YouTube"
      >
        <i class="fa-brands fa-youtube fa-beat-fade" style="color: #ff0000"></i>
      </a>

      <!-- Call Button -->
      <a
        href="#"
        class="floating-btn call-btn"
        data-tooltip="Call Us"
        aria-label="Call Us"
        id="callTrigger"
      >
        <i class="fa-solid fa-phone-volume fa-shake"></i>
      </a>
      <a
        href="https://www.google.com/maps/place/Bike+builders/@26.1159711,85.3999381,17z/data=!3m1!4b1!4m6!3m5!1s0x39ed11b964ff11bf:0x188a2d7e1473af0b!8m2!3d26.1159664!4d85.404809!16s%2Fg%2F11wftsdzy6?entry=ttu&g_ep=EgoyMDI1MDUyMS4wIKXMDSoASAFQAw%3D%3D"
        class="floating-btn call-btn"
        data-tooltip="Visit Us"
        aria-label="Visit Us"
      >
        <i class="fa-solid fa-motorcycle fa-shake"></i>
      </a>
    </div>

    <div id="whatsappModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h3>Choose WhatsApp Number</h3>
        <button class="number-option" data-number="918210283582">
          +91 82102 83582
        </button>
        <button class="number-option" data-number="919876543210">
          +91 98358 44897
        </button>
      </div>
    </div>

    <div id="callModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h3>Choose Number to Call</h3>
        <button class="number-option" data-number="918210283582">
          +91 82102 83582
        </button>
        <button class="number-option" data-number="919876543210">
          +91 98358 44897
        </button>
      </div>
    </div>
  </body>
  <script>
    // Dynamic testimonials fetch
    document.addEventListener("DOMContentLoaded", function () {
      function getInitials(name) {
        if (!name) return "U";
        return name
          .split(" ")
          .map((n) => n[0].toUpperCase())
          .join("")
          .slice(0, 2);
      }
      function randomAvatar(name) {
        // Use dicebear for demo, fallback to initials
        const seed = name ? name.replace(/\s/g, "") : "user";
        return `https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(
          seed,
        )}`;
      }
      function renderTestimonials(reviews) {
        const container = document.getElementById("dynamic-testimonials");
        if (!reviews || reviews.length === 0) {
          container.innerHTML = '<div class="no-reviews">No reviews yet.</div>';
          return;
        }
        container.innerHTML = reviews
          .map(
            (r) => `
              <div class="testimonial" itemscope itemtype="https://schema.org/Review">
                <div class="quote-icon">
                  <i class="fas fa-quote-right" aria-hidden="true"></i>
                </div>
                <div class="testimonial-header">
                  <img src="${randomAvatar(r.name)}" alt="${
                    r.name
                  }" class="user-avatar" width="60" height="60" loading="lazy" />
                  <div class="user-info">
                    <h4 class="user-name" itemprop="author">${r.name}</h4>
                    <div class="rating" itemprop="reviewRating" itemscope itemtype="https://schema.org/Rating">
                      <meta itemprop="ratingValue" content="${r.rating}" />
                      ${'<i class="fas fa-star"></i>'.repeat(
                        r.rating,
                      )}${'<i class="far fa-star"></i>'.repeat(5 - r.rating)}
                    </div>
                  </div>
                </div>
                <div class="quote" itemprop="reviewBody">${r.message}</div>
                <div class="testimonial-footer">
                  <span class="testimonial-date">${new Date(
                    r.date,
                  ).toLocaleDateString()}</span>
                </div>
                <meta itemprop="itemReviewed" content="Bike Builders" />
              </div>
            `,
          )
          .join("");
      }
      function fetchTestimonials() {
        fetch(API_BASE + "/api/reviews")
          .then((res) => res.json())
          .then((data) => {
            if (data.success && Array.isArray(data.reviews)) {
              renderTestimonials(data.reviews);
            } else {
              renderTestimonials([]);
            }
          })
          .catch(() => {
            renderTestimonials([]);
          });
      }
      fetchTestimonials();

      // Review Modal logic
      const reviewModal = document.getElementById("reviewModal");
      const closeReviewModalBtn = reviewModal.querySelector(".close");
      closeReviewModalBtn.addEventListener("click", () => {
        reviewModal.style.display = "none";
      });
      window.addEventListener("click", function (event) {
        if (event.target == reviewModal) {
          reviewModal.style.display = "none";
        }
      });
      // Star rating logic
      const stars = reviewModal.querySelectorAll(".star");
      const ratingInput = document.getElementById("reviewRating");
      stars.forEach((star) => {
        star.addEventListener("click", function () {
          const val = this.getAttribute("data-value");
          ratingInput.value = val;
          stars.forEach((s, i) => {
            s.classList.toggle("selected", i < val);
          });
        });
      });
      // Submit review
      const reviewForm = document.getElementById("reviewForm");
      reviewForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const name = document.getElementById("reviewName").value.trim();
        const message = document.getElementById("reviewMessage").value.trim();
        const rating = Number(document.getElementById("reviewRating").value);
        if (!name || !message || !rating) {
          alert("Please fill all fields and select a rating.");
          return;
        }
        fetch(API_BASE + "/api/reviews", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, message, rating }),
        })
          .then((res) => res.json())
          .then((data) => {
            if (data.success) {
              reviewModal.style.display = "none";
              reviewForm.reset();
              ratingInput.value = 0;
              stars.forEach((s) => s.classList.remove("selected"));
              fetchTestimonials();
            } else {
              alert("Failed to submit review.");
            }
          })
          .catch(() => alert("Failed to submit review."));
      });
      // Open modal button (add anywhere you want, e.g. after testimonials)
      const openBtn = document.createElement("button");
      openBtn.className = "review-btn";
      openBtn.onclick = () => {
        reviewModal.style.display = "block";
      };
      document.querySelector(".testimonials-section").appendChild(openBtn);
      // Make footer stars open the review modal and pre-select rating
      const footerStars = document.querySelectorAll(".footer-stars .star");
      footerStars.forEach((fs, idx) => {
        fs.addEventListener("click", () => {
          reviewModal.style.display = "block";
          const ratingInput = document.getElementById("reviewRating");
          const modalStars = reviewModal.querySelectorAll(".star");
          const val = idx + 1;
          if (ratingInput) ratingInput.value = val;
          modalStars.forEach((s, i) => s.classList.toggle("selected", i < val));
        });
      });
    });
  </script>
</html>
