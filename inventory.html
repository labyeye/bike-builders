<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>Inventory | Bike Builders</title>
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="inventory.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="hero-section inventory-hero">
      <div class="overlay">
        <div class="rectangle"></div>
        <div class="gradient"></div>
      </div>

      <nav class="navbar">
        <div class="logo">
          <img src="./assets/logo2.svg" class="logo-img" alt="" />
        </div>
        <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="inventory.html" class="active">Buy Bike</a></li>
          <li><a href="sell.html">Sell Your Bike</a></li>
          <li><a href="about.html">About Us</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <div class="login-btn">
          <a href="/getquote.html">
            <button>Get the Quote</button>
          </a>
        </div>
      </nav>

      <div class="hero-content">
        <h1>Our Collection</h1>
      </div>
      <div class="bicycle-text">Bike</div>
      <div class="bike-slider">
        <div class="bike-slides">
          <img
            src="https://cdn.bajajauto.com/-/media/images/ktm/ktm-bikes/orp/390-duke-orange-booking/00.ashx"
            alt="Bike 1"
          />
          <img
            src="https://cdn.bajajauto.com/-/media/assets/bajajauto/360degreeimages/bikes/pulsar/pulsar-150/single-disc/black-red/00.png"
            alt="Bike 2"
          />
          <img
            src="https://torrentbajaj.com/wp-content/themes/rvtheme/bikes/360-10152-1.png"
            alt="Bike 3"
          />
          <img
            src="https://imgd.aeplcdn.com/0X0/n/cw/ec/97549/apache-rtr-160-4v-right-side-view-8.png?isig=0&q=80"
            alt="Bike 1"
          />
          <img
            src="https://imgd.aeplcdn.com/1280x720/n/cw/ec/15109/splendor-plus-right-side-view-2.png?isig=0"
            alt="Bike 2"
          />
          <img
            src="https://imgd.aeplcdn.com/1280x720/n/cw/ec/49656/continental-gt-right-side-view-12.png?isig=0"
            alt="Bike 3"
          />
          <img
            src="https://cdn.bajajauto.com/-/media/images/ktm/ktm-bikes/orp/390-duke-orange-booking/00.ashx"
            alt="Bike 1"
          />
          <img
            src="https://imgd.aeplcdn.com/664x374/n/cw/ec/95229/ninja-h2r-right-side-view-2.png?isig=0&q=80"
            alt="Bike 2"
          />
          <img
            src="https://kaydeeauto.in/cdn/shop/files/BajajPulsarRS200BS61.png?v=1709297338"
            alt="Bike 3"
          />
          <img
            src="https://awtobazar.in/wp-content/uploads/2024/05/Bajaj-Pulsar-NS400Z.png"
            alt="Bike 1"
          />
          <img
            src="https://imgd.aeplcdn.com/1280x720/n/cw/ec/15109/splendor-plus-right-side-view-2.png?isig=0"
            alt="Bike 2"
          />
          <img
            src="https://imgd.aeplcdn.com/1280x720/n/cw/ec/49656/continental-gt-right-side-view-12.png?isig=0"
            alt="Bike 3"
          />
        </div>
      </div>
    </div>

    <section class="inventory-section full-inventory">
      <div class="inventory-content">
        <!-- Left sidebar filters -->
        <div class="sidebar-filters">
          <div class="filters-container">
            <h3>Filters</h3>
            <div class="filter-group">
              <button class="filter-btn" data-filter="all">All Bikes</button>
            </div>

            <div class="filter-group">
              <button class="filter-btn" data-filter="price">
                Price <i class="fas fa-chevron-down"></i>
              </button>
              <div class="filter-dropdown" id="price-dropdown">
                <div class="price-range">
                  <div class="range-inputs">
                    <input
                      type="number"
                      id="min-price"
                      placeholder="Min"
                      min="0"
                    />
                    <span>to</span>
                    <input
                      type="number"
                      id="max-price"
                      placeholder="Max"
                      min="0"
                    />
                  </div>
                  <div class="price-presets">
                    <button class="price-preset" data-min="0" data-max="50000">
                      Under 50K
                    </button>
                    <button
                      class="price-preset"
                      data-min="50000"
                      data-max="100000"
                    >
                      50K-1L
                    </button>
                    <button
                      class="price-preset"
                      data-min="100000"
                      data-max="200000"
                    >
                      1L-2L
                    </button>
                    <button
                      class="price-preset"
                      data-min="200000"
                      data-max="500000"
                    >
                      2L-5L
                    </button>
                    <button class="price-preset" data-min="500000">5L+</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="filter-group">
              <button class="filter-btn" data-filter="brand">
                Brand <i class="fas fa-chevron-down"></i>
              </button>
              <div class="filter-dropdown" id="brand-dropdown">
                <div class="filter-options brand-options">
                  <button class="filter-option" data-brand="AJS">AJS</button>
                  <button class="filter-option" data-brand="Aprilia">
                    Aprilia
                  </button>
                  <button class="filter-option" data-brand="Ather Energy">
                    Ather Energy
                  </button>
                  <button class="filter-option" data-brand="Ariel">
                    Ariel
                  </button>
                  <button class="filter-option" data-brand="Bajaj">
                    Bajaj
                  </button>
                  <button class="filter-option" data-brand="Benelli">
                    Benelli
                  </button>
                  <button class="filter-option" data-brand="Bimota">
                    Bimota
                  </button>
                  <button class="filter-option" data-brand="BMW Motorrad">
                    BMW Motorrad
                  </button>
                  <button class="filter-option" data-brand="BSA">BSA</button>
                  <button class="filter-option" data-brand="Buell">
                    Buell
                  </button>
                  <button class="filter-option" data-brand="CFMoto">
                    CFMoto
                  </button>
                  <button class="filter-option" data-brand="Can-Am">
                    Can-Am
                  </button>
                  <button class="filter-option" data-brand="Cagiva">
                    Cagiva
                  </button>
                  <button
                    class="filter-option"
                    data-brand="Cleveland CycleWerks"
                  >
                    Cleveland CycleWerks
                  </button>
                  <button class="filter-option" data-brand="Ducati">
                    Ducati
                  </button>
                  <button class="filter-option" data-brand="Derbi">
                    Derbi
                  </button>
                  <button class="filter-option" data-brand="DKW">DKW</button>
                  <button class="filter-option" data-brand="Daelim">
                    Daelim
                  </button>
                  <button class="filter-option" data-brand="Energica">
                    Energica
                  </button>
                  <button class="filter-option" data-brand="Erik Buell Racing">
                    Erik Buell Racing
                  </button>
                  <button class="filter-option" data-brand="Evoke Motorcycles">
                    Evoke Motorcycles
                  </button>
                  <button class="filter-option" data-brand="Fantic Motor">
                    Fantic Motor
                  </button>
                  <button class="filter-option" data-brand="FB Mondial">
                    FB Mondial
                  </button>
                  <button class="filter-option" data-brand="Fischer">
                    Fischer
                  </button>
                  <button class="filter-option" data-brand="Gas Gas">
                    Gas Gas
                  </button>
                  <button class="filter-option" data-brand="Gilera">
                    Gilera
                  </button>
                  <button class="filter-option" data-brand="Gogoro">
                    Gogoro
                  </button>
                  <button class="filter-option" data-brand="Greeves">
                    Greeves
                  </button>
                  <button class="filter-option" data-brand="Harley-Davidson">
                    Harley-Davidson
                  </button>
                  <button class="filter-option" data-brand="Hero">Hero</button>
                  <button class="filter-option" data-brand="Honda">
                    Honda
                  </button>
                  <button class="filter-option" data-brand="Husqvarna">
                    Husqvarna
                  </button>
                  <button class="filter-option" data-brand="Indian Motorcycle">
                    Indian Motorcycle
                  </button>
                  <button class="filter-option" data-brand="Italjet">
                    Italjet
                  </button>
                  <button class="filter-option" data-brand="IMZ-Ural">
                    IMZ-Ural
                  </button>
                  <button class="filter-option" data-brand="Jawa">Jawa</button>
                  <button class="filter-option" data-brand="Jincheng">
                    Jincheng
                  </button>
                  <button class="filter-option" data-brand="Junak">
                    Junak
                  </button>
                  <button class="filter-option" data-brand="Kawasaki">
                    Kawasaki
                  </button>
                  <button class="filter-option" data-brand="KTM">KTM</button>
                  <button class="filter-option" data-brand="Kymco">
                    Kymco
                  </button>
                  <button class="filter-option" data-brand="KR Motors">
                    KR Motors
                  </button>
                  <button class="filter-option" data-brand="Lambretta">
                    Lambretta
                  </button>
                  <button class="filter-option" data-brand="Lifan">
                    Lifan
                  </button>
                  <button
                    class="filter-option"
                    data-brand="Lightning Motorcycles"
                  >
                    Lightning Motorcycles
                  </button>
                  <button class="filter-option" data-brand="Mahindra">
                    Mahindra
                  </button>
                  <button class="filter-option" data-brand="Modenas">
                    Modenas
                  </button>
                  <button class="filter-option" data-brand="Moto Guzzi">
                    Moto Guzzi
                  </button>
                  <button class="filter-option" data-brand="MV Agusta">
                    MV Agusta
                  </button>
                  <button class="filter-option" data-brand="Norton">
                    Norton
                  </button>
                  <button class="filter-option" data-brand="Niu Technologies">
                    Niu Technologies
                  </button>
                  <button class="filter-option" data-brand="Ossa">Ossa</button>
                  <button class="filter-option" data-brand="Piaggio">
                    Piaggio
                  </button>
                  <button class="filter-option" data-brand="Peugeot Scooters">
                    Peugeot Scooters
                  </button>
                  <button class="filter-option" data-brand="Paton">
                    Paton
                  </button>
                  <button
                    class="filter-option"
                    data-brand="Qianjiang Motorcycle"
                  >
                    Qianjiang Motorcycle
                  </button>
                  <button class="filter-option" data-brand="Royal Enfield">
                    Royal Enfield
                  </button>
                  <button class="filter-option" data-brand="Rieju">
                    Rieju
                  </button>
                  <button class="filter-option" data-brand="Rokon">
                    Rokon
                  </button>
                  <button class="filter-option" data-brand="Suzuki">
                    Suzuki
                  </button>
                  <button class="filter-option" data-brand="Sherco">
                    Sherco
                  </button>
                  <button class="filter-option" data-brand="SYM">SYM</button>
                  <button class="filter-option" data-brand="Scomadi">
                    Scomadi
                  </button>
                  <button class="filter-option" data-brand="Triumph">
                    Triumph
                  </button>
                  <button class="filter-option" data-brand="TVS Motor Company">
                    TVS Motor Company
                  </button>
                  <button class="filter-option" data-brand="Terra Modena">
                    Terra Modena
                  </button>
                  <button
                    class="filter-option"
                    data-brand="Ultraviolette Automotive"
                  >
                    Ultraviolette Automotive
                  </button>
                  <button
                    class="filter-option"
                    data-brand="United Auto Industries"
                  >
                    United Auto Industries
                  </button>
                  <button class="filter-option" data-brand="Vespa">
                    Vespa
                  </button>
                  <button
                    class="filter-option"
                    data-brand="Victory Motorcycles"
                  >
                    Victory Motorcycles
                  </button>
                  <button class="filter-option" data-brand="Voxan">
                    Voxan
                  </button>
                  <button class="filter-option" data-brand="Wasp Motorcycles">
                    Wasp Motorcycles
                  </button>
                  <button class="filter-option" data-brand="Yamaha">
                    Yamaha
                  </button>
                  <button class="filter-option" data-brand="Yezdi">
                    Yezdi
                  </button>
                  <button class="filter-option" data-brand="Zero Motorcycles">
                    Zero Motorcycles
                  </button>
                  <button class="filter-option" data-brand="Zongshen">
                    Zongshen
                  </button>
                </div>
              </div>
            </div>
            <div class="filter-group">
              <button class="filter-btn" data-filter="year">
                Year <i class="fas fa-chevron-down"></i>
              </button>
              <div class="filter-dropdown" id="year-dropdown">
                <div class="year-slider">
                  <div class="slider-container">
                    <input
                      type="range"
                      id="year-min"
                      min="2015"
                      max="2024"
                      value="2015"
                      step="1"
                    />
                    <input
                      type="range"
                      id="year-max"
                      min="2015"
                      max="2024"
                      value="2024"
                      step="1"
                    />
                  </div>
                  <div class="year-values">
                    <span id="year-min-value">2015</span>
                    <span>to</span>
                    <span id="year-max-value">2024</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="filter-group">
              <button class="filter-btn" data-filter="km">
                KM Driven <i class="fas fa-chevron-down"></i>
              </button>
              <div class="filter-dropdown" id="km-dropdown">
                <div class="km-slider">
                  <div class="slider-container">
                    <input
                      type="range"
                      id="km-min"
                      min="0"
                      max="50000"
                      value="0"
                      step="500"
                    />
                    <input
                      type="range"
                      id="km-max"
                      min="0"
                      max="50000"
                      value="50000"
                      step="500"
                    />
                  </div>
                  <div class="km-values">
                    <span id="km-min-value">0</span>
                    <span>to</span>
                    <span id="km-max-value">50,000</span>
                    <span>km</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="filter-group">
              <button class="filter-btn" data-filter="owner">
                Ownership <i class="fas fa-chevron-down"></i>
              </button>
              <div class="filter-dropdown" id="owner-dropdown">
                <div class="filter-options ownership-options">
                  <button class="filter-option" data-owner="1">
                    1st Owner
                  </button>
                  <button class="filter-option" data-owner="2">
                    2nd Owner
                  </button>
                  <button class="filter-option" data-owner="3">3+ Owner</button>
                </div>
              </div>
            </div>

            <div class="filter-group">
              <button class="filter-btn" data-filter="fuel">
                Fuel Type <i class="fas fa-chevron-down"></i>
              </button>
              <div class="filter-dropdown" id="fuel-dropdown">
                <div class="filter-options fuel-options">
                  <button class="filter-option" data-fuel="Petrol">
                    Petrol
                  </button>
                  <button class="filter-option" data-fuel="Electric">
                    Electric
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right side bike grid -->
        <div class="bike-grid-container">
          <div class="section-header">
            <h2 id="filtered-count">0 Bikes Available</h2>
          </div>
          <div class="bike-grid"></div>
        </div>
      </div>
    </section>
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <div class="logo">
            <img
              src="./assets/logo2.svg"
              style="width: 50px"
              alt="Dan Electo Logo"
            />
          </div>
          <p>Bringing the future of cycling to you today.</p>
          <div class="social-icons">
            <a href="https://www.facebook.com/share/1Ao18FYX8e/"
              ><i class="fab fa-facebook-f"></i
            ></a>
            <a
              href="https://www.instagram.com/bikebuilders41?igsh=ZDk5M3NxdmI1Ymhp"
              ><i class="fab fa-instagram"></i
            ></a>
            <a href="https://wa.me/918210283582"
              ><i class="fab fa-whatsapp"></i
            ></a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="inventory.html">Buy Bike</a></li>
            <li><a href="sell.html">Sell Your Bike</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Contact Us</h3>
          <p>
            <i class="fas fa-map-marker-alt"></i> Kanhauli Naka-2, Musahri,
            Muzaffarpur, Bihar 842001
          </p>
          <p><i class="fas fa-phone"></i>+91 8210283582</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2023 Bike Builders. All rights reserved.</p>
        <a href="www.pixelatenest.com" style="color: #a9a9a9"
          >Designed By Pixelate Nest</a
        >
      </div>
    </footer>
    <script>
      // Replace your existing script with this updated version
      document.addEventListener("DOMContentLoaded", function () {
        let allBikes = [];
        let currentFilters = {
          brand: null,
          minPrice: 0,
          maxPrice: Infinity,
          minYear: 2015,
          maxYear: 2024,
          minKm: 0,
          maxKm: 50000,
          owner: null,
          fuel: null,
        };

        // Fetch bikes from API
        function loadBikes() {
          fetch("https://bike-builders.onrender.com/api/bikes")
            .then((response) => {
              if (!response.ok) {
                throw new Error("Network response was not ok");
              }
              return response.json();
            })
            .then((bikes) => {
              allBikes = bikes;
              if (bikes.length === 0) {
                showNoBikesMessage();
              } else {
                displayBikes(bikes);
              }
              updateBikeCount(bikes.length);
            })
            .catch((error) => {
              console.error("Error fetching bikes:", error);
              showErrorMessage();
            });
        }

        // Display bikes in grid
        function displayBikes(bikes) {
          const bikeGrid = document.querySelector(".bike-grid");
          bikeGrid.innerHTML = "";

          if (bikes.length === 0) {
            showNoBikesMessage();
            return;
          }

          bikes.forEach((bike) => {
            const bikeCard = createBikeCard(bike);
            bikeGrid.appendChild(bikeCard);
          });

          // Add click event listeners to bike cards for popup
          addBikeCardClickListeners();
        }

        // Create individual bike card
        function createBikeCard(bike) {
          const bikeCard = document.createElement("div");
          bikeCard.className = "bike-card";

          // Set data attributes for filtering
          bikeCard.dataset.brand = bike.brand || "";
          bikeCard.dataset.price = bike.price || 0;
          bikeCard.dataset.year = bike.modelYear || new Date().getFullYear();
          bikeCard.dataset.km = bike.kmDriven || 0;
          bikeCard.dataset.owner = bike.ownership || "1";
          bikeCard.dataset.fuel = bike.fuelType || "Petrol";

          // Store bike data for popup
          bikeCard.dataset.bikeData = JSON.stringify(bike);

          const isAvailable = bike.status === "Available";
          const buttonClass =
            bike.status === "Sold Out"
              ? "sold-out"
              : bike.status === "Coming Soon"
              ? "coming-soon"
              : "";

          bikeCard.innerHTML = `
      <img src="${
        bike.imageUrl || "https://via.placeholder.com/300x200?text=No+Image"
      }" 
           alt="${bike.brand} ${bike.model}" 
           onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'" />
      <div class="card-content">
        <h3>${bike.brand} ${bike.model}</h3>
        <span class="model">${bike.modelYear} Model</span>
        <div class="details">
          <div class="detail-item">
            <i class="fas fa-tachometer-alt"></i>
            <span>${(bike.kmDriven || 0).toLocaleString()} km</span>
          </div>
          <div class="detail-item">
            <i class="fas fa-user"></i>
            <span>${formatOwnership(bike.ownership || "1")}</span>
          </div>
          <div class="detail-item">
            <i class="fas fa-gas-pump"></i>
            <span>${bike.fuelType || "Petrol"}</span>
          </div>
          <div class="detail-item">
            <i class="fas fa-calendar-alt"></i>
            <span>${formatAge(bike.daysOld || 0)}</span>
          </div>
        </div>
        <div class="price-container">
          <div class="price">₹${(bike.price || 0).toLocaleString()}</div>
          <div class="emi">Down: ₹${(
            bike.downPayment || 0
          ).toLocaleString()} | EMI: ₹${Math.round(
            ((bike.price || 0) - (bike.downPayment || 0)) / 36
          ).toLocaleString()}/month</div>
          <button class="view-details-btn ${buttonClass}" ${
            !isAvailable ? "disabled" : ""
          }>
            ${bike.status || "View Details"}
          </button>
        </div>
      </div>
    `;
          return bikeCard;
        }

        // Helper function to format ownership
        function formatOwnership(owner) {
          if (owner === "1") return "1st Owner";
          if (owner === "2") return "2nd Owner";
          if (owner === "3") return "3+ Owner";
          return owner;
        }

        // Add click event listeners to bike cards
        function addBikeCardClickListeners() {
          document.querySelectorAll(".bike-card").forEach((card) => {
            const button = card.querySelector(".view-details-btn");
            if (button && !button.disabled) {
              button.addEventListener("click", (e) => {
                e.stopPropagation();
                const bikeData = JSON.parse(card.dataset.bikeData);
                showBikePopup(bikeData);
              });
            }
          });
        }

        // Show bike details popup
        function showBikePopup(bike) {
          const popup = document.querySelector(".bike-popup-overlay");

          // Populate popup with bike data
          document.getElementById("popup-bike-image").src =
            bike.imageUrl ||
            "https://via.placeholder.com/400x300?text=No+Image";
          document.getElementById(
            "popup-bike-title"
          ).textContent = `${bike.brand} ${bike.model}`;
          document.getElementById(
            "popup-bike-model"
          ).textContent = `${bike.modelYear} Model`;
          document.getElementById("popup-bike-km").textContent = `${(
            bike.kmDriven || 0
          ).toLocaleString()} km`;
          document.getElementById("popup-bike-owner").textContent =
            formatOwnership(bike.ownership || "1");
          document.getElementById("popup-bike-fuel").textContent =
            bike.fuelType || "Petrol";
          document.getElementById("popup-bike-age").textContent = formatAge(
            bike.daysOld || 0
          );
          document.getElementById("popup-bike-price").textContent = `₹${(
            bike.price || 0
          ).toLocaleString()}`;
          document.getElementById("popup-bike-emi").textContent = `Down: ₹${(
            bike.downPayment || 0
          ).toLocaleString()} | EMI: ₹${Math.round(
            ((bike.price || 0) - (bike.downPayment || 0)) / 36
          ).toLocaleString()}/month`;

          // Show popup
          popup.classList.add("active");
          document.body.style.overflow = "hidden";
        }

        // Close popup functionality
        function initPopupClose() {
          const popup = document.querySelector(".bike-popup-overlay");
          const closeBtn = document.querySelector(".close-popup");

          closeBtn.addEventListener("click", closePopup);

          popup.addEventListener("click", (e) => {
            if (e.target === popup) {
              closePopup();
            }
          });

          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              closePopup();
            }
          });
        }

        function closePopup() {
          const popup = document.querySelector(".bike-popup-overlay");
          popup.classList.remove("active");
          document.body.style.overflow = "";
        }

        // Show no bikes message
        function showNoBikesMessage() {
          const bikeGrid = document.querySelector(".bike-grid");
          bikeGrid.innerHTML = `
      <div class="no-bikes-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <i class="fas fa-motorcycle" style="font-size: 4rem; color: #ccc; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">No Bikes Available</h3>
        <p style="color: #999;">New bikes coming soon! Check back later.</p>
      </div>
    `;
        }

        // Show error message
        function showErrorMessage() {
          const bikeGrid = document.querySelector(".bike-grid");
          bikeGrid.innerHTML = `
      <div class="error-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <i class="fas fa-exclamation-triangle" style="font-size: 4rem; color: #ff6b00; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">Failed to Load Bikes</h3>
        <p style="color: #999; margin-bottom: 20px;">Please check your connection and try again.</p>
        <button onclick="location.reload()" style="background: #ff6b00; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
          Retry
        </button>
      </div>
    `;
        }

        // Update bike count
        function updateBikeCount(count) {
          document.getElementById("filtered-count").textContent = `${count} ${
            count === 1 ? "Bike" : "Bikes"
          } Available`;
        }

        // Filter functionality
        function initFilters() {
          const filterButtons = document.querySelectorAll(".filter-btn");
          const filterDropdowns = document.querySelectorAll(".filter-dropdown");

          // Toggle filter dropdowns
          filterButtons.forEach((button) => {
            button.addEventListener("click", function (e) {
              e.stopPropagation();
              const filterType = this.dataset.filter;

              // Hide all dropdowns first
              filterDropdowns.forEach((dropdown) => {
                dropdown.style.display = "none";
              });

              // Toggle active state on buttons
              filterButtons.forEach((btn) => {
                btn.classList.remove("active");
              });
              this.classList.add("active");

              // Show the corresponding dropdown or reset filters
              if (filterType !== "all") {
                const dropdown = document.getElementById(
                  `${filterType}-dropdown`
                );
                if (dropdown) {
                  dropdown.style.display = "block";
                }
              } else {
                // Reset all filters and show all bikes
                resetFilters();
                displayBikes(allBikes);
                updateBikeCount(allBikes.length);
              }
            });
          });

          // Close dropdowns when clicking outside
          document.addEventListener("click", function (e) {
            if (
              !e.target.closest(".filter-btn") &&
              !e.target.closest(".filter-dropdown")
            ) {
              filterDropdowns.forEach((dropdown) => {
                dropdown.style.display = "none";
              });
            }
          });

          // Initialize specific filters
          initPriceFilter();
          initBrandFilter();
          initYearFilter();
          initKmFilter();
          initOwnerFilter();
          initFuelFilter();
        }

        // Price filter
        function initPriceFilter() {
          const minPriceInput = document.getElementById("min-price");
          const maxPriceInput = document.getElementById("max-price");

          if (minPriceInput && maxPriceInput) {
            minPriceInput.addEventListener("input", applyPriceFilter);
            maxPriceInput.addEventListener("input", applyPriceFilter);

            document.querySelectorAll(".price-preset").forEach((preset) => {
              preset.addEventListener("click", function () {
                minPriceInput.value = this.dataset.min;
                maxPriceInput.value = this.dataset.max || "";
                applyPriceFilter();
              });
            });
          }
        }

        function applyPriceFilter() {
          const minPrice =
            parseInt(document.getElementById("min-price").value) || 0;
          const maxPrice =
            parseInt(document.getElementById("max-price").value) || Infinity;

          currentFilters.minPrice = minPrice;
          currentFilters.maxPrice = maxPrice;

          applyAllFilters();
        }

        // Brand filter
        function initBrandFilter() {
          document
            .querySelectorAll(".brand-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const brand = this.dataset.brand;
                currentFilters.brand =
                  brand === currentFilters.brand ? null : brand;
                applyAllFilters();

                // Update button text
                const brandBtn = document.querySelector(
                  '[data-filter="brand"]'
                );
                brandBtn.innerHTML = currentFilters.brand
                  ? `${brand} <i class="fas fa-chevron-down"></i>`
                  : `Brand <i class="fas fa-chevron-down"></i>`;
              });
            });
        }

        // Year filter
        function initYearFilter() {
          const yearMin = document.getElementById("year-min");
          const yearMax = document.getElementById("year-max");
          const yearMinValue = document.getElementById("year-min-value");
          const yearMaxValue = document.getElementById("year-max-value");

          if (yearMin && yearMax) {
            yearMin.addEventListener("input", function () {
              yearMinValue.textContent = this.value;
              currentFilters.minYear = parseInt(this.value);
              applyAllFilters();
            });

            yearMax.addEventListener("input", function () {
              yearMaxValue.textContent = this.value;
              currentFilters.maxYear = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // KM filter
        function initKmFilter() {
          const kmMin = document.getElementById("km-min");
          const kmMax = document.getElementById("km-max");
          const kmMinValue = document.getElementById("km-min-value");
          const kmMaxValue = document.getElementById("km-max-value");

          if (kmMin && kmMax) {
            kmMin.addEventListener("input", function () {
              kmMinValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.minKm = parseInt(this.value);
              applyAllFilters();
            });

            kmMax.addEventListener("input", function () {
              kmMaxValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.maxKm = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Owner filter
        function initOwnerFilter() {
          document
            .querySelectorAll(".ownership-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const owner = this.dataset.owner;
                currentFilters.owner =
                  owner === currentFilters.owner ? null : owner;
                applyAllFilters();
              });
            });
        }

        // Fuel filter
        function initFuelFilter() {
          document
            .querySelectorAll(".fuel-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const fuel = this.dataset.fuel;
                currentFilters.fuel =
                  fuel === currentFilters.fuel ? null : fuel;
                applyAllFilters();
              });
            });
        }

        // Apply all filters
        function applyAllFilters() {
          const filteredBikes = allBikes.filter((bike) => {
            const price = bike.price || 0;
            const year = bike.modelYear || new Date().getFullYear();
            const km = bike.kmDriven || 0;
            const brand = (bike.brand || "").toLowerCase();
            const owner = bike.ownership || "";
            const fuel = bike.fuelType || "";

            return (
              price >= currentFilters.minPrice &&
              price <= currentFilters.maxPrice &&
              year >= currentFilters.minYear &&
              year <= currentFilters.maxYear &&
              km >= currentFilters.minKm &&
              km <= currentFilters.maxKm &&
              (!currentFilters.brand ||
                brand === currentFilters.brand.toLowerCase()) &&
              (!currentFilters.owner || owner.includes(currentFilters.owner)) &&
              (!currentFilters.fuel || fuel === currentFilters.fuel)
            );
          });

          displayBikes(filteredBikes);
          updateBikeCount(filteredBikes.length);
        }

        // Reset filters
        function resetFilters() {
          currentFilters = {
            brand: null,
            minPrice: 0,
            maxPrice: Infinity,
            minYear: 2015,
            maxYear: 2024,
            minKm: 0,
            maxKm: 50000,
            owner: null,
            fuel: null,
          };

          // Reset form inputs
          document.getElementById("min-price").value = "";
          document.getElementById("max-price").value = "";
          document.getElementById("year-min").value = "2015";
          document.getElementById("year-max").value = "2024";
          document.getElementById("km-min").value = "0";
          document.getElementById("km-max").value = "50000";

          // Reset display values
          document.getElementById("year-min-value").textContent = "2015";
          document.getElementById("year-max-value").textContent = "2024";
          document.getElementById("km-min-value").textContent = "0";
          document.getElementById("km-max-value").textContent = "50,000";
        }

        // Format age for display
        function formatAge(days) {
          if (days >= 365) {
            const years = Math.floor(days / 365);
            return `${years} year${years > 1 ? "s" : ""}`;
          } else if (days >= 30) {
            const months = Math.floor(days / 30);
            return `${months} month${months > 1 ? "s" : ""}`;
          } else {
            return `${days} day${days !== 1 ? "s" : ""}`;
          }
        }

        // Initialize everything
        loadBikes();
        initFilters();
        initPopupClose();
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggleBtn = document.createElement("button");
        toggleBtn.className = "mobile-menu-toggle";
        toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';

        const navbar = document.querySelector(".navbar");
        navbar.appendChild(toggleBtn);

        const mobileMenu = document.createElement("div");
        mobileMenu.className = "mobile-menu";
        mobileMenu.innerHTML = `
      <button class="close-btn"><i class="fas fa-times"></i></button>
      <ul class="nav-links">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="inventory.html">Buy Bike</a></li>
        <li><a href="sell.html">Sell Your Bike</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <div class="login-btn">
        <button>Get the Quote</button>
      </div>
    `;

        document.body.appendChild(mobileMenu);

        toggleBtn.addEventListener("click", function () {
          mobileMenu.classList.add("active");
        });

        mobileMenu
          .querySelector(".close-btn")
          .addEventListener("click", function () {
            mobileMenu.classList.remove("active");
          });
      });
      // Add this function near the top of your script section
      function formatAge(days) {
        if (days >= 365) {
          const years = Math.floor(days / 365);
          return `${years} year${years > 1 ? "s" : ""}`;
        } else if (days >= 30) {
          const months = Math.floor(days / 30);
          return `${months} month${months > 1 ? "s" : ""}`;
        } else {
          return `${days} day${days !== 1 ? "s" : ""}`;
        }
      }
    </script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-ETL311CBE6"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-ETL311CBE6");
    </script>
    <div class="bike-popup-overlay">
      <div class="bike-popup">
        <button class="close-popup">&times;</button>
        <div class="popup-content">
          <div class="popup-image-container">
            <img id="popup-bike-image" src="" alt="Bike Image" />
          </div>
          <div class="popup-details">
            <h2 id="popup-bike-title"></h2>
            <span class="model" id="popup-bike-model"></span>
            <div class="details">
              <div class="detail-item">
                <i class="fas fa-tachometer-alt"></i>
                <span id="popup-bike-km"></span>
              </div>
              <div class="detail-item">
                <i class="fas fa-user"></i>
                <span id="popup-bike-owner"></span>
              </div>
              <div class="detail-item">
                <i class="fas fa-gas-pump"></i>
                <span id="popup-bike-fuel"></span>
              </div>
              <div class="detail-item">
                <i class="fas fa-calendar-alt"></i>
                <span id="popup-bike-age"></span>
              </div>
            </div>
            <div class="price-container">
              <div class="price" id="popup-bike-price"></div>
              <div class="emi" id="popup-bike-emi"></div>
            </div>

            <button class="contact-btn">Contact Seller</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
